(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[191],{1427:function(e,t,a){Promise.resolve().then(a.bind(a,8516))},8516:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(7437),s=a(2265),n=a(9376),i=a(4114);let o={D134:"White Bread",D129:"Italian Bread",D133:"Flatbread",D131:"Wheat Bread",D854:"Multigrain Flatbread",D139:"American Cheese",D138:"Swiss Cheese",D136:"Cheddar Cheese",D518:"Ham",D317:"Steak",D171:"Pickles",D169:"Jalape\xf1os",D170:"Spinach",D163:"Tomatoes",D164:"Onions",D165:"Cucumbers",D166:"Green Peppers",D173:"Banana Peppers",D167:"Black Olives",D162:"Lettuce",D145:"Ranch",D147:"BBQ Sauce",D149:"Hot Sauce",D154:"Honey Mustard",D156:"Chipotle Southwest",D157:"Light Mayonnaise",D146:"Italian Dressing",D141:"Mayonnaise",D151:"Oil & Vinegar",D144:"Ketchup",D174:"Vinegar",D153:"Sweet Onion",D143:"Mustard",D668:"Sriracha",D1478:"Buffalo Sauce",D160:"Pepper",D159:"Salt",2575:"Double Meat",2594:"Extra Bread",2590:"Extra Toppings",3668:"Premium Sauces",2588:"Extra Sauce",2407:"Extra Cheese",2435:"Premium Toppings",B1:"Italian Bread",B2:"Wheat Bread",B3:"Flatbread",B4:"Multigrain Bread",B5:"Gluten Free Bread",P1:"Turkey",P2:"Ham",P3:"Chicken Breast",P4:"Roast Beef",P5:"Tuna",P6:"Veggie Patty",C1:"American Cheese",C2:"Swiss Cheese",C3:"Pepper Jack",V1:"Lettuce",V2:"Tomato",V3:"Cucumber",V4:"Onion",V5:"Bell Pepper",V6:"Olives",V7:"Pickles",V8:"Spinach",V9:"Jalape\xf1os",V10:"Carrots",S1:"Mayonnaise",S2:"Mustard",S3:"Ketchup",S4:"Ranch",S5:"BBQ Sauce",S6:"Hot Sauce",S7:"Sweet Onion",S8:"Honey Mustard",S9:"Chipotle Southwest",S10:"Light Mayonnaise",S11:"Oil",S12:"Vinegar",S13:"Salt",S14:"Pepper",S15:"Oregano",E1:"Bacon",E2:"Avocado",E3:"Guacamole",E4:"Double Meat",E5:"Extra Cheese",E6:"Extra Vegetables",SE1:"Salt",SE2:"Pepper",EG1:"Egg",CO1:"Chocolate Chip Cookie",CO2:"Oatmeal Raisin Cookie",CO3:"Sugar Cookie",O1:"Extra Sauce",O2:"No Salt",O3:"Light Sauce"};function l(e){var t;let{isOpen:a,onClose:n,product:i,build:l,onAddToCart:c}=e,[d,u]=(0,s.useState)({}),[m,h]=(0,s.useState)(0),p=e=>({Bread:"Bread Type",Protein:"Protein",Cheese:"Cheese",Vegetable:"Vegetables",Sauce:"Sauces",Seasonings:"Seasonings",Extra:"Extras",Egg:"Egg Options",Cookies:"Cookies",Other:"Other Options"})[e]||e,g=(e,t)=>{let a={D129:"Italian Herb & Cheese",D131:"Hearty Italian",D133:"Honey Oat",D134:"White",D854:"Multigrain",D136:"Provolone",D138:"Swiss",D139:"American",D518:"Leg Ham",D306:"Turkey Breast",D317:"Steak",D162:"Lettuce",D163:"Tomatoes",D164:"Red Onions",D165:"Cucumbers",D166:"Capsicum",D167:"Olives",D169:"Jalape\xf1os",D170:"Baby Spinach",D171:"Pickles",D173:"Banana Peppers",D141:"Mayonnaise",D143:"Seeded Mustard",D144:"Tomato Sauce",D145:"Ranch",D146:"Italian Dressing",D147:"BBQ Sauce",D149:"Chilli",D151:"Oil",D153:"Sweet Onion",D154:"Honey Mustard",D156:"Southwest",D157:"Light Mayo",D174:"Vinegar",D668:"Sriracha",D1478:"Buffalo Sauce",D159:"Salt",D160:"Pepper",2407:"Extra Cheese",2575:"Double Protein",2588:"Extra Sauce",2590:"Premium Toppings",2594:"Extra Bread",3668:"Gourmet Sauces"};if(a[e])return a[e];let r={Bread:"Bread",Cheese:"Cheese",Protein:"Protein",Vegetable:"Vegetable",Sauce:"Sauce",Seasonings:"Seasoning",Extra:"Extra"}[t]||t;return e.startsWith("D")?"".concat(r," Option ").concat(e.slice(1)):e.match(/^\d+$/)?"".concat(r," #").concat(e):"".concat(r," ").concat(e)},D=(e,t)=>o[e]?o[e]:t?g(e,t):x(e,t||"Unknown",[]),x=(e,t,a)=>(a&&Array.isArray(a)&&a.find(t=>t.Id===e),f(e,t)),f=(e,t)=>{let a=p(t);if(e.startsWith("D")){let t=e.slice(1);return"".concat(a," ").concat(t)}if(e.startsWith("P")){let t=e.slice(1);return"Protein ".concat(t)}if(e.startsWith("C")){let t=e.slice(1);return"Cheese ".concat(t)}if(e.startsWith("V")){let t=e.slice(1);return"Vegetable ".concat(t)}if(e.startsWith("S")){let t=e.slice(1);return"Sauce ".concat(t)}if(e.startsWith("E")){let t=e.slice(1);return"Extra ".concat(t)}if(e.startsWith("SE")){let t=e.slice(1);return"Seasoning ".concat(t)}else if(e.startsWith("EG")){let t=e.slice(1);return"Egg ".concat(t)}else if(e.startsWith("CO")){let t=e.slice(1);return"Cookie ".concat(t)}else if(e.startsWith("O")){let t=e.slice(1);return"Option ".concat(t)}else if(e.match(/^\d+$/))return"".concat(a," ").concat(e);else return"".concat(a," ").concat(e)},y=e=>{let t=(null==l?void 0:l.Price)||0;return(null==l?void 0:l.Options)&&Object.entries(e).forEach(e=>{var a;let[r,s]=e,n=null===(a=l.Options)||void 0===a?void 0:a[r];n&&"object"==typeof n&&n.Options&&s.forEach(e=>{let a=n.Options.find(t=>t.Id===e);a&&a.Price>0&&(t+=a.Price)})}),t};(0,s.useEffect)(()=>{if(l){let e={};l.Options&&(console.log("Build options structure:",l.Options),Object.entries(l.Options).forEach(t=>{let[a,r]=t;if(console.log("Option type ".concat(a,":"),r),r&&"object"==typeof r&&r.Options){let t=r.Options.filter(e=>e&&e.IsDefault);e[a]=t.map(e=>e.Id),r.Options.forEach(e=>{e&&e.Id&&!o[e.Id]&&console.log("Unmapped customization ID: ".concat(e.Id," in category ").concat(a))})}}),u(e),h(y(e)))}},[l]);let j=(e,t,a)=>{u(r=>{var s;let n;let i=r[e]||[];if(n=a?[...i,t]:i.filter(e=>e!==t),null==l?void 0:null===(s=l.Options)||void 0===s?void 0:s[e]){let t=l.Options[e];if(t&&"object"==typeof t){let{MaximumQuantity:e=999}=t;e>0&&n.length>e&&(n=n.slice(0,e))}}let o={...r,[e]:n};return h(y(o)),o})};return a&&i&&l?(0,r.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,r.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:"800px",width:"95%",padding:"2.5rem",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"2rem",borderBottom:"2px solid var(--gray-200)",paddingBottom:"1rem"},children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[(0,r.jsxs)("div",{style:{width:"120px",height:"120px",borderRadius:"12px",overflow:"hidden",border:"2px solid var(--gray-200)",flexShrink:0},children:[(0,r.jsx)("img",{src:(t=i.ImageUrl)?"https://subway.com".concat(t):"\uD83E\uDD6A",alt:i.Name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{let t=e.currentTarget;t.style.display="none";let a=t.nextElementSibling;a&&(a.style.display="flex")}}),(0,r.jsx)("div",{style:{width:"100%",height:"100%",fontSize:"3rem",textAlign:"center",display:"none",alignItems:"center",justifyContent:"center",backgroundColor:"var(--gray-100)",color:"var(--gray-400)"},children:"\uD83E\uDD6A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{style:{fontSize:"1.8rem",margin:"0 0 0.5rem 0",color:"var(--gray-800)",fontWeight:"700"},children:i.Name}),(0,r.jsx)("div",{style:{fontSize:"1.1rem",fontWeight:"600",backgroundColor:"var(--brand-1)",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",display:"inline-block"},children:l.BuildName})]})]}),(0,r.jsx)("button",{onClick:n,style:{background:"var(--gray-100)",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"var(--gray-600)",padding:"0.5rem",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="var(--gray-200)",e.currentTarget.style.color="var(--gray-800)"},onMouseLeave:e=>{e.currentTarget.style.background="var(--gray-100)",e.currentTarget.style.color="var(--gray-600)"},children:"\xd7"})]}),(0,r.jsxs)("div",{style:{marginBottom:"2rem",padding:"1.5rem"},children:[(0,r.jsx)("p",{style:{margin:"0 0 1rem 0",fontSize:"1rem",lineHeight:"1.6",color:"var(--gray-700)"},children:i.Description}),(0,r.jsxs)("div",{style:{fontSize:"1rem",fontWeight:"500",color:"var(--gray-600)",padding:"0.5rem 0",display:"inline-block"},children:["Base Price: $",l.Price.toFixed(2)]})]}),l.Options&&Object.entries(l.Options).map(e=>{let[t,a]=e;return a&&"object"==typeof a&&a.Options?(0,r.jsxs)("div",{className:"customization-section",style:{marginBottom:"2rem",padding:"1.5rem 0"},children:[(0,r.jsxs)("h4",{style:{fontSize:"1.3rem",margin:"0 0 1rem 0",color:"var(--gray-800)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,r.jsx)("span",{style:{width:"8px",height:"8px",backgroundColor:"var(--brand-1)",borderRadius:"50%",display:"inline-block"}}),p(t)]}),(a.MinimumQuantity>0||a.MaximumQuantity>0)&&(0,r.jsxs)("div",{style:{marginBottom:"1rem",padding:"0.75rem 0",fontSize:"0.9rem",color:"var(--gray-600)",display:"flex",gap:"1rem"},children:[a.MinimumQuantity>0&&(0,r.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,r.jsx)("span",{style:{color:"var(--brand-1)",fontWeight:"600"},children:"✓"}),"Min: ",a.MinimumQuantity]}),a.MaximumQuantity>0&&(0,r.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,r.jsx)("span",{style:{color:"var(--gray-500)",fontWeight:"600"},children:"⚠"}),"Max: ",a.MaximumQuantity]})]}),(0,r.jsx)("div",{className:"customization-options",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"0.75rem"},children:Array.isArray(a.Options)&&a.Options.filter(e=>e&&"object"==typeof e&&e.Id).map(e=>{var a;return(0,r.jsxs)("label",{className:"option-item",style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",padding:"1rem",borderRadius:"8px",border:"1px solid var(--gray-200)",transition:"all 0.2s ease",backgroundColor:"white"},onMouseEnter:e=>{e.currentTarget.style.borderColor="var(--brand-1)",e.currentTarget.style.backgroundColor="var(--gray-50)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--gray-200)",e.currentTarget.style.backgroundColor="white"},children:[(0,r.jsx)("input",{type:"checkbox",checked:(null===(a=d[t])||void 0===a?void 0:a.includes(e.Id))||!1,onChange:a=>j(t,e.Id,a.target.checked),style:{width:"18px",height:"18px",accentColor:"var(--brand-1)"}}),(0,r.jsx)("span",{className:"option-name",style:{flex:"1",fontSize:"1rem",fontWeight:"500",color:"var(--gray-800)"},children:D(e.Id,t)}),e.Price>0&&(0,r.jsxs)("span",{className:"option-price",style:{fontWeight:"600",fontSize:"0.9rem",backgroundColor:"var(--brand-1)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"6px",whiteSpace:"nowrap"},children:["+$",e.Price.toFixed(2)]})]},e.Id)})})]},t):null}),(0,r.jsxs)("div",{className:"modal-actions",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"2rem",padding:"1.5rem 0",borderTop:"1px solid var(--gray-200)"},children:[(0,r.jsxs)("div",{style:{fontWeight:"700",fontSize:"1.4rem",color:"var(--brand-1)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("span",{style:{backgroundColor:"var(--brand-1)",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",fontSize:"1.2rem"},children:["$",m.toFixed(2)]})]}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(i&&l){let e=!0,t="";if(l.Options&&Object.entries(l.Options).forEach(a=>{let[r,s]=a;if(s&&"object"==typeof s&&s.Options){let a=d[r]||[],{MinimumQuantity:n=0}=s;"Bread"===r&&a.length<n&&(e=!1,t="".concat(p(r)," requires at least ").concat(n," selection(s)"))}}),!e){alert(t);return}c(i,l,Object.values(d).flat()),n()}},style:{fontSize:"1.1rem",padding:"1rem 2rem",borderRadius:"8px",fontWeight:"600",minWidth:"200px"},children:"\uD83D\uDED2 Add to Cart"})]})]})}):null}function c(){var e;let t=(0,n.useRouter)(),[a,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(""),[m,h]=(0,s.useState)([]),[p,g]=(0,s.useState)(!0),[D,x]=(0,s.useState)({}),[f,y]=(0,s.useState)({isOpen:!1,product:null,build:null}),j=e=>{let t={};return e.Data.Products.forEach(e=>{e.Builds.forEach(e=>{e.Options&&Object.entries(e.Options).forEach(e=>{let[a,r]=e;r&&r.Options&&r.Options.forEach(e=>{let r=e.Id;t[r]||(t[r]=b(r,a))})})})}),console.log("Auto-discovered customization mappings:",t),x(t),t},b=(e,t)=>{let a={D129:"Italian Herb & Cheese",D131:"Hearty Italian",D133:"Honey Oat",D134:"White",D854:"Multigrain",D518:"Leg Ham",D306:"Turkey Breast",D317:"Steak",D136:"Provolone",D138:"Swiss",D139:"American",D162:"Lettuce",D163:"Tomatoes",D164:"Red Onions",D165:"Cucumbers",D166:"Capsicum",D167:"Olives",D169:"Jalape\xf1os",D170:"Baby Spinach",D171:"Pickles",D173:"Banana Peppers",D141:"Mayonnaise",D143:"Seeded Mustard",D144:"Tomato Sauce",D145:"Ranch",D146:"Italian Dressing",D147:"BBQ Sauce",D149:"Chilli",D151:"Oil",D153:"Sweet Onion",D154:"Honey Mustard",D156:"Southwest",D157:"Light Mayo",D174:"Vinegar",D668:"Sriracha",D1478:"Buffalo Sauce",D159:"Salt",D160:"Pepper",2407:"Extra Cheese",2575:"Double Protein",2588:"Extra Sauce",2590:"Premium Toppings",2594:"Extra Bread",3668:"Gourmet Sauces"};if(a[e])return a[e];let r=t.replace(/s$/,"");return"".concat(r," ").concat(e.replace(/^D/,""))};(0,s.useEffect)(()=>{let e=localStorage.getItem("campus-angel-cart");if(e)try{let t=JSON.parse(e);h(t)}catch(e){console.error("Error parsing saved cart:",e)}},[]),(0,s.useEffect)(()=>{fetch("/products.json").then(e=>(console.log("Response status:",e.status),e.json())).then(e=>{console.log("Loaded menu data:",e),console.log("Categories:",e.Data.Categories),console.log("Products:",e.Data.Products),j(e),c(e),e.Data.Categories.length>0&&(u(e.Data.Categories[0].Id),console.log("Set active section to:",e.Data.Categories[0].Id)),g(!1)}).catch(e=>{console.error("Error loading menu data:",e),g(!1)})},[]);let v=e=>!!o[e]||!!D[e]&&!D[e].includes("Option")&&!D[e].includes("#")||["D129","D131","D133","D134","D854","D136","D138","D139","D518","D306","D317","D162","D163","D164","D165","D166","D167","D169","D170","D171","D173","D141","D143","D144","D145","D146","D147","D149","D151","D153","D154","D156","D157","D174","D668","D1478","D159","D160","2407","2575","2588","2590","2594","3668"].includes(e),S=(e,t)=>{y({isOpen:!0,product:e,build:{...t,Options:t.Options?Object.fromEntries(Object.entries(t.Options).map(e=>{let[t,a]=e;return a&&a.Options?[t,{...a,Options:a.Options.filter(e=>v(e.Id))}]:[t,a]})):void 0}})},C=e=>o[e]?o[e]:D[e]?D[e]:e.startsWith("D")?"Option ".concat(e.slice(1)):e.startsWith("P")?"Protein ".concat(e.slice(1)):e.startsWith("C")?"Cheese ".concat(e.slice(1)):e.startsWith("V")?"Vegetable ".concat(e.slice(1)):e.startsWith("S")?"Sauce ".concat(e.slice(1)):e.startsWith("E")?"Extra ".concat(e.slice(1)):"Customization ".concat(e),O=e=>e?"https://subway.com".concat(e):"\uD83E\uDD6A",N=(e,t)=>{h(a=>{let r;let s=a.find(t=>{let a=(t.customizations||[]).sort().join(",");return"".concat(t.id,"-").concat(t.buildId,"-").concat(a)===e});if(!s)return a;let n=s.quantity+t;return r=n<=0?a.filter(t=>{let a=(t.customizations||[]).sort().join(",");return"".concat(t.id,"-").concat(t.buildId,"-").concat(a)!==e}):a.map(t=>{let a=(t.customizations||[]).sort().join(",");return"".concat(t.id,"-").concat(t.buildId,"-").concat(a)===e?{...t,quantity:n}:t}),localStorage.setItem("campus-angel-cart",JSON.stringify(r)),r})},k=m.reduce((e,t)=>e+t.price*t.quantity,0);if(p)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{}),(0,r.jsx)("main",{style:{marginTop:80,padding:"2rem",textAlign:"center"},children:(0,r.jsx)("div",{children:"Loading menu..."})})]});if(!a)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{}),(0,r.jsx)("main",{style:{marginTop:80,padding:"2rem",textAlign:"center"},children:(0,r.jsx)("div",{children:"Error loading menu data"})})]});let{Categories:I,Products:E}=a.Data;return console.log("Current Categories:",I),console.log("Current Products:",E),console.log("Active Section:",d),console.log("First 3 products:",E.slice(0,3)),console.log("First 3 categories:",I.slice(0,3)),console.log("Products for current category:",E.filter(e=>e.Categories.some(e=>"string"==typeof e?e===d:e.Id===d))),E.slice(0,5).forEach(e=>{console.log('Product "'.concat(e.Name,'" has categories:'),e.Categories)}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{}),(0,r.jsxs)("main",{style:{marginTop:0},children:[(0,r.jsx)("div",{className:"restaurant-header",style:{marginTop:"80px"},children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"restaurant-info",children:[(0,r.jsx)("h1",{children:"\uD83E\uDD6A Subway"}),(0,r.jsx)("p",{children:"Fresh sandwiches made to order with premium ingredients"}),(0,r.jsxs)("div",{className:"restaurant-meta",children:[(0,r.jsx)("span",{children:"⭐ 4.5 Rating"}),(0,r.jsx)("span",{children:"\uD83D\uDD52 8-15 min delivery"}),(0,r.jsx)("span",{children:"\uD83D\uDCB0 Free delivery"})]})]})})}),(0,r.jsxs)("div",{className:"menu-layout",children:[(0,r.jsx)("div",{className:"menu-nav",children:I.map(e=>(0,r.jsx)("button",{className:"nav-item ".concat(d===e.Id?"active":""),onClick:()=>u(e.Id),children:e.Name},e.Id))}),(0,r.jsx)("div",{className:"menu-content",children:(0,r.jsxs)("div",{className:"category-section",children:[(0,r.jsx)("h2",{children:null===(e=I.find(e=>e.Id===d))||void 0===e?void 0:e.Name}),(0,r.jsx)("div",{className:"menu-grid",children:E.filter(e=>e.Categories.some(e=>"string"==typeof e?e===d:e.Id===d)).map(e=>(0,r.jsxs)("div",{className:"menu-item",children:[(0,r.jsxs)("div",{className:"item-image",children:[(0,r.jsx)("img",{src:O(e.ImageUrl),alt:e.Name,onError:e=>{let t=e.currentTarget;t.style.display="none";let a=t.nextElementSibling;a&&(a.style.display="block")}}),(0,r.jsx)("div",{style:{fontSize:"4rem",textAlign:"center",padding:"2rem",display:"none"},children:"\uD83E\uDD6A"})]}),(0,r.jsxs)("div",{className:"item-info",children:[(0,r.jsx)("h3",{children:e.Name}),(0,r.jsx)("p",{children:e.Description}),(0,r.jsxs)("div",{className:"item-price",children:["From $",Math.min(...e.Builds.map(e=>e.Price)).toFixed(2)]}),e.Builds.map(t=>(0,r.jsxs)("button",{className:"btn btn-primary",onClick:()=>S(e,t),style:{marginRight:"0.5rem",marginBottom:"0.5rem"},children:[t.BuildName," - $",t.Price.toFixed(2)]},t.Id))]})]},e.MasterProductId))})]})}),(0,r.jsxs)("div",{className:"cart-sidebar",children:[(0,r.jsx)("h3",{children:"\uD83D\uDED2 Your Order"}),0===m.length?(0,r.jsx)("div",{className:"empty-cart",children:"Your cart is empty"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"cart-items",children:m.map(e=>{let t=(e.customizations||[]).sort().join(","),a="".concat(e.id,"-").concat(e.buildId,"-").concat(t);return(0,r.jsxs)("div",{className:"cart-item",children:[(0,r.jsxs)("div",{className:"item-details",children:[(0,r.jsx)("h4",{children:e.name}),(0,r.jsx)("div",{className:"customizations",children:e.customizations&&e.customizations.length>0&&(0,r.jsxs)("span",{children:["Customizations: ",e.customizations.filter(e=>v(e)).map(e=>C(e)).join(", ")]})})]}),(0,r.jsxs)("div",{className:"item-actions",children:[(0,r.jsxs)("div",{className:"quantity-controls",children:[(0,r.jsx)("button",{onClick:()=>N(a,-1),children:"-"}),(0,r.jsx)("span",{children:e.quantity}),(0,r.jsx)("button",{onClick:()=>N(a,1),children:"+"})]}),(0,r.jsx)("button",{className:"remove-btn",onClick:()=>N(a,-e.quantity),children:"Remove"})]})]},a)})}),(0,r.jsx)("div",{className:"cart-total",children:(0,r.jsxs)("div",{className:"total-line total",children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("span",{children:["$",(k+(k>0?2.99:0)).toFixed(2)]})]})}),(0,r.jsx)("button",{className:"btn btn-primary checkout-btn",onClick:()=>t.push("/checkout"),children:"Proceed to Checkout"})]})]})]}),(0,r.jsx)(l,{isOpen:f.isOpen,onClose:()=>{y({isOpen:!1,product:null,build:null})},product:f.product,build:f.build,onAddToCart:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t.Price;t.Options&&a.length>0&&Object.entries(t.Options).forEach(e=>{let[,t]=e;t&&"object"==typeof t&&t.Options&&a.forEach(e=>{let a=t.Options.find(t=>t.Id===e);a&&a.Price>0&&(r+=a.Price)})}),console.log("Adding to cart:",{product:e.Name,build:t.BuildName,customizations:a,totalPrice:r}),h(s=>{let n;let i=a.sort().join(",");return n=s.find(a=>{let r=(a.customizations||[]).sort().join(",");return a.id===e.MasterProductId&&a.buildId===t.Id&&r===i})?s.map(a=>{let s=(a.customizations||[]).sort().join(",");return a.id===e.MasterProductId&&a.buildId===t.Id&&s===i?{...a,quantity:a.quantity+1,price:r}:a}):[...s,{id:e.MasterProductId,buildId:t.Id,name:"".concat(e.Name," - ").concat(t.BuildName),price:r,quantity:1,customizations:a}],localStorage.setItem("campus-angel-cart",JSON.stringify(n)),n})}})]})]})}},4114:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(7437),s=a(2265),n=a(9376),i=a(7648);function o(){let e=(0,n.useRouter)(),t=(0,n.usePathname)(),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0),m=e=>{c(e)};(0,s.useEffect)(()=>(window.updateNavbarUser=m,()=>{delete window.updateNavbarUser}),[]),(0,s.useEffect)(()=>{(async()=>{let e=localStorage.getItem("accessToken"),t=localStorage.getItem("refreshToken");if(!e){u(!1),c(null);return}try{let a=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(a.ok){let e=await a.json();c(e.user)}else if(401===a.status&&t)try{let e=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(e.ok){let t=await e.json();localStorage.setItem("accessToken",t.session.accessToken),localStorage.setItem("refreshToken",t.session.refreshToken);let a=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(t.session.accessToken),"Content-Type":"application/json"}});if(a.ok){let e=await a.json();c(e.user)}else localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c(null)}else localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c(null)}catch(e){console.error("Token refresh error:",e),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c(null)}else localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c(null)}catch(e){console.error("Auth check error:",e),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c(null)}finally{u(!1)}})()},[t]);let h=async()=>{let t=localStorage.getItem("accessToken");if(t)try{await fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:t})})}catch(e){console.error("Logout error:",e)}c(null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e.push("/")},p="/login"===t||"/register"===t;return(0,r.jsx)("header",{className:"site-header",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"navbar",children:[(0,r.jsx)("div",{className:"navbar-brand",children:(0,r.jsxs)(i.default,{href:"/",className:"logo",children:[(0,r.jsx)("span",{className:"logo-icon",children:"\uD83D\uDC7C"}),(0,r.jsx)("span",{className:"logo-text",children:"Campus Angel"})]})}),(0,r.jsxs)("nav",{className:"navbar-nav ".concat(a?"open":""),children:[(0,r.jsx)(i.default,{href:"/",className:"nav-link",children:"Home"}),(0,r.jsx)(i.default,{href:"/restaurants",className:"nav-link",children:"Restaurants"}),(0,r.jsx)(i.default,{href:"/about",className:"nav-link",children:"About"}),(0,r.jsx)(i.default,{href:"/contact",className:"nav-link",children:"Contact"})]}),(0,r.jsxs)("div",{className:"navbar-actions",children:[d?(0,r.jsx)("div",{className:"auth-loading",children:(0,r.jsx)("span",{className:"loading-spinner",children:"⏳"})}):p?null:(0,r.jsx)(r.Fragment,{children:l?(0,r.jsx)("div",{className:"user-menu",children:(0,r.jsxs)("div",{className:"user-info",children:[(0,r.jsxs)("div",{className:"user-details",children:[(0,r.jsxs)("span",{className:"user-greeting",children:["Hello, ",l.firstName,"!"]}),(0,r.jsx)("span",{className:"user-email",children:l.email})]}),(0,r.jsxs)("div",{className:"user-actions",children:[(0,r.jsx)(i.default,{href:"/account",className:"btn btn-secondary account-btn",children:"My Account"}),(0,r.jsx)("button",{className:"btn btn-secondary logout-btn",onClick:h,children:"Logout"})]})]})}):(0,r.jsxs)("div",{className:"auth-buttons",children:[(0,r.jsx)(i.default,{href:"/login",className:"btn btn-secondary",children:"Login"}),(0,r.jsx)(i.default,{href:"/register",className:"btn btn-primary",children:"Register"})]})}),(0,r.jsxs)(i.default,{href:"/cart",className:"btn btn-secondary cart-btn",children:[(0,r.jsx)("span",{className:"cart-icon",children:"\uD83D\uDED2"}),(0,r.jsx)("span",{className:"cart-text",children:"Cart"})]}),(0,r.jsx)("button",{className:"mobile-menu-toggle",onClick:()=>o(!a),"aria-label":"Toggle mobile menu",children:(0,r.jsx)("span",{className:"hamburger ".concat(a?"open":"")})})]})]})})})}}},function(e){e.O(0,[448,971,117,744],function(){return e(e.s=1427)}),_N_E=e.O()}]);