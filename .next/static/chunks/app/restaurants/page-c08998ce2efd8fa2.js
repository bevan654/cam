(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{9526:function(e,s,a){Promise.resolve().then(a.bind(a,9950))},9376:function(e,s,a){"use strict";var r=a(5475);a.o(r,"usePathname")&&a.d(s,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})},9950:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return c}});var r=a(7437),n=a(2265),t=a(9376),l=a(7648),i=a(8734);function c(){let e=(0,t.useRouter)(),{user:s,loading:a,logout:c}=(0,i.a)(),[o]=(0,n.useState)([{id:1,name:"Subway",cuisine:"American • Sandwiches",rating:4.8,deliveryTime:"15-20 min",deliveryFee:"Free",emoji:"\uD83E\uDD6A",badge:"Most Popular",description:"Fresh subs & salads made to order with premium ingredients.",popularItems:"Italian BMT, Turkey Breast, Veggie Delite",category:"fast-food",image:"/api/placeholder/400/200"}]),[d,u]=(0,n.useState)("all"),[h,m]=(0,n.useState)(""),j=o.filter(e=>"all"===d||e.category===d).filter(e=>{if(!h)return!0;let s=h.toLowerCase();return e.name.toLowerCase().includes(s)||e.cuisine.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.popularItems.toLowerCase().includes(s)}),x=s=>{"subway"===s.name.toLowerCase()&&e.push("/restaurants/subway")};return(0,r.jsxs)("div",{className:"App",children:[(0,r.jsxs)("div",{className:"restaurants-hero-bg",children:[(0,r.jsx)("header",{className:"modern-header",children:(0,r.jsxs)("nav",{className:"modern-nav",children:[(0,r.jsx)(l.default,{href:"/",className:"modern-logo",children:"Campus Angel"}),(0,r.jsxs)("ul",{className:"modern-nav-links",children:[(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/",children:"Home"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/restaurants",children:"Restaurants"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/account",children:"Account"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/cart",children:"Cart"})})]}),(0,r.jsx)("div",{className:"modern-auth-buttons",children:a?(0,r.jsx)("div",{className:"auth-loading",children:"⏳"}):s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"welcome-text",children:["Welcome, ",s.firstName,"!"]}),(0,r.jsx)(l.default,{href:"/account",className:"btn btn-outline-modern",children:"My Account"}),(0,r.jsx)(l.default,{href:"/cart",className:"btn btn-primary-modern",children:"Cart"}),(0,r.jsx)("button",{onClick:c,className:"btn btn-secondary-modern",children:"Logout"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{href:"/login",className:"btn btn-outline-modern",children:"Log In"}),(0,r.jsx)(l.default,{href:"/register",className:"btn btn-primary-modern",children:"Sign Up"})]})})]})}),(0,r.jsx)("section",{className:"restaurants-hero",children:(0,r.jsx)("div",{className:"restaurants-hero-container",children:(0,r.jsxs)("div",{className:"restaurants-hero-content",children:[(0,r.jsx)("h1",{children:"\uD83C\uDF7D️ Campus Restaurants"}),(0,r.jsx)("p",{children:"Discover delicious food from your favorite campus spots. Fresh, fast, and delivered right to you!"}),(0,r.jsxs)("div",{className:"restaurants-hero-stats",children:[(0,r.jsxs)("div",{className:"modern-stat",children:[(0,r.jsx)("span",{className:"modern-stat-number",children:o.length}),(0,r.jsx)("span",{className:"modern-stat-label",children:"Restaurants"})]}),(0,r.jsxs)("div",{className:"modern-stat",children:[(0,r.jsx)("span",{className:"modern-stat-number",children:"10+"}),(0,r.jsx)("span",{className:"modern-stat-label",children:"Cuisines"})]}),(0,r.jsxs)("div",{className:"modern-stat",children:[(0,r.jsx)("span",{className:"modern-stat-number",children:"15min"}),(0,r.jsx)("span",{className:"modern-stat-label",children:"Avg Delivery"})]})]})]})})})]}),(0,r.jsx)("main",{className:"restaurants-main",children:(0,r.jsxs)("div",{className:"restaurants-container",children:[(0,r.jsxs)("div",{className:"modern-search-section",children:[(0,r.jsxs)("div",{className:"modern-search-box",children:[(0,r.jsx)("div",{className:"search-icon",children:"\uD83D\uDD0D"}),(0,r.jsx)("input",{type:"text",placeholder:"Search restaurants, cuisines, or dishes...",value:h,onChange:e=>m(e.target.value),className:"modern-search-input"})]}),(0,r.jsxs)("div",{className:"modern-category-filters",children:[(0,r.jsx)("button",{className:"modern-category-btn ".concat("all"===d?"active":""),onClick:()=>u("all"),children:"All"}),(0,r.jsx)("button",{className:"modern-category-btn ".concat("fast-food"===d?"active":""),onClick:()=>u("fast-food"),children:"\uD83E\uDD6A Sandwiches"})]})]}),(0,r.jsx)("div",{className:"results-header",children:(0,r.jsxs)("h2",{children:["all"===d?"All Restaurants":"".concat(d.charAt(0).toUpperCase()+d.slice(1)," Restaurants"),(0,r.jsxs)("span",{className:"results-count",children:["(",j.length," found)"]})]})}),(0,r.jsx)("div",{className:"modern-restaurants-grid",children:0===j.length?(0,r.jsxs)("div",{className:"no-results",children:[(0,r.jsx)("div",{className:"no-results-icon",children:"\uD83D\uDE15"}),(0,r.jsx)("h3",{children:"No restaurants found"}),(0,r.jsx)("p",{children:"Try adjusting your search or filter criteria"})]}):j.map((e,s)=>(0,r.jsxs)("div",{className:"modern-restaurant-card",onClick:()=>x(e),style:{animationDelay:"".concat(.1*s,"s")},children:[(0,r.jsxs)("div",{className:"modern-restaurant-image",children:[(0,r.jsx)("div",{className:"restaurant-emoji",children:e.emoji}),(0,r.jsx)("div",{className:"restaurant-badge",children:e.badge})]}),(0,r.jsxs)("div",{className:"modern-restaurant-content",children:[(0,r.jsxs)("div",{className:"restaurant-header",children:[(0,r.jsx)("h3",{children:e.name}),(0,r.jsxs)("div",{className:"rating-badge",children:["⭐ ",e.rating]})]}),(0,r.jsx)("p",{className:"restaurant-cuisine",children:e.cuisine}),(0,r.jsx)("p",{className:"restaurant-description",children:e.description}),(0,r.jsxs)("div",{className:"restaurant-meta-grid",children:[(0,r.jsxs)("div",{className:"meta-item",children:[(0,r.jsx)("span",{className:"meta-icon",children:"\uD83D\uDD52"}),(0,r.jsx)("span",{children:e.deliveryTime})]}),(0,r.jsxs)("div",{className:"meta-item",children:[(0,r.jsx)("span",{className:"meta-icon",children:"\uD83D\uDCB0"}),(0,r.jsx)("span",{children:e.deliveryFee})]})]}),(0,r.jsxs)("div",{className:"popular-items",children:[(0,r.jsx)("span",{className:"popular-label",children:"Popular:"}),(0,r.jsx)("span",{className:"popular-text",children:e.popularItems})]}),(0,r.jsx)("div",{className:"restaurant-action",children:(0,r.jsx)("button",{className:"order-btn",children:"Order Now"})})]})]},e.id))})]})})]})}},8734:function(e,s,a){"use strict";a.d(s,{a:function(){return t}});var r=a(2265),n=a(9376);function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{requireAuth:s=!1,redirectToLogin:a=!1}=e,t=(0,n.useRouter)(),[l,i]=(0,r.useState)({user:null,loading:!0,error:null}),c=(0,r.useCallback)(async()=>{try{let e=localStorage.getItem("accessToken");if(!e){i({user:null,loading:!1,error:null}),s&&a&&t.push("/login");return}let r=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(r.ok){let e=await r.json();i({user:e.user,loading:!1,error:null})}else if(401===r.status){let e=localStorage.getItem("refreshToken");if(e)try{let s=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(s.ok){let e=await s.json();localStorage.setItem("accessToken",e.session.accessToken),localStorage.setItem("refreshToken",e.session.refreshToken);let a=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e.session.accessToken),"Content-Type":"application/json"}});if(a.ok){let e=await a.json();i({user:e.user,loading:!1,error:null})}else o()}else o()}catch(e){console.error("Token refresh error:",e),o()}else o()}else o()}catch(e){console.error("Auth check error:",e),i({user:null,loading:!1,error:"Failed to check authentication"}),s&&a&&t.push("/login")}},[s,a,t]),o=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),i({user:null,loading:!1,error:null}),s&&a&&t.push("/login")};return(0,r.useEffect)(()=>{c()},[c]),{user:l.user,loading:l.loading,error:l.error,isAuthenticated:!!l.user,logout:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),i({user:null,loading:!1,error:null}),t.push("/")},refreshAuth:()=>{i(e=>({...e,loading:!0})),c()}}}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=9526)}),_N_E=e.O()}]);