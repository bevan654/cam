(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{7019:function(e,s,r){Promise.resolve().then(r.bind(r,4811))},4811:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return h}});var a=r(7437),n=r(2265),t=r(9376),i=r(6853),c=r(2360),l=r(8734),o=r(6672);(0,c.J)("pk_test_51RvFxXPhAQtRWVqnklj6a00qrHrmYQWVEt6fgBwdte0bJHOkWQHs7o3lWIuYGZF3WqFMEkT0ZSIUc7pIlW63OxLz00fneok36u");let d={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"},backgroundColor:"transparent"},invalid:{color:"#9e2146"}}};function u(e){let{amount:s,onCardError:r,onPaymentMethodReady:t}=e,c=(0,i.useStripe)(),l=(0,i.useElements)(),[o,u]=(0,n.useState)(""),[h,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{r&&r(o)},[o,r]);let p=async()=>{if(!c||!l)throw Error("Stripe not initialized");let e=l.getElement(i.CardElement);if(!e)throw Error("Card element not found");let{error:s,paymentMethod:r}=await c.createPaymentMethod({type:"card",card:e});if(s)throw Error(s.message);return r};return(0,n.useEffect)(()=>{t&&t({createPaymentMethod:p})},[t]),(0,a.jsxs)("div",{className:"stripe-payment-form",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"card-element",children:"Credit or Debit Card"}),(0,a.jsx)("div",{className:"card-element-container",children:(0,a.jsx)(i.CardElement,{id:"card-element",options:d,onChange:e=>{e.error?u(e.error.message):u("")},className:"card-element"})}),o&&(0,a.jsx)("span",{className:"error-text",children:o})]}),(0,a.jsx)("div",{className:"payment-summary",children:(0,a.jsxs)("div",{className:"amount-display",children:[(0,a.jsx)("span",{children:"Total Amount:"}),(0,a.jsxs)("span",{className:"total-amount",children:["$",s.toFixed(2)]})]})}),(0,a.jsxs)("div",{className:"payment-security",children:[(0,a.jsxs)("div",{className:"security-badges",children:[(0,a.jsx)("span",{className:"security-badge",children:"\uD83D\uDD12"}),(0,a.jsx)("span",{className:"security-badge",children:"SSL"}),(0,a.jsx)("span",{className:"security-badge",children:"PCI"})]}),(0,a.jsx)("p",{className:"security-text",children:"Your payment information is secure and encrypted"})]})]})}function h(){let e=(0,t.useRouter)(),{user:s,loading:r,isAuthenticated:d,logout:h}=(0,l.a)({requireAuth:!0,redirectToLogin:!1}),[m,p]=(0,n.useState)(null),[x,j]=(0,n.useState)(!1),[D,f]=(0,n.useState)({deliveryDetails:{building:"",room:"",instructions:""},contactInfo:{name:"",phone:"",email:""},paymentMethod:"card"}),[g,N]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!0),[b,k]=(0,n.useState)(""),[S,C]=(0,n.useState)(null),[w,E]=(0,n.useState)([]);(0,n.useEffect)(()=>{s&&f(e=>({...e,contactInfo:{name:"".concat(s.firstName," ").concat(s.lastName),phone:s.phone||"",email:s.email}}))},[s]),(0,n.useEffect)(()=>{(async()=>{p(await (0,c.J)("pk_test_51RvFxXPhAQtRWVqnklj6a00qrHrmYQWVEt6fgBwdte0bJHOkWQHs7o3lWIuYGZF3WqFMEkT0ZSIUc7pIlW63OxLz00fneok36u"))})()},[]),(0,n.useEffect)(()=>{let e=localStorage.getItem("campus-angel-cart");if(e)try{E(JSON.parse(e))}catch(e){console.error("Error parsing cart:",e),E([])}y(!1)},[]);let I={D134:"White Bread",D129:"Italian Bread",D133:"Flatbread",D131:"Wheat Bread",D854:"Multigrain Flatbread",D139:"American Cheese",D138:"Swiss Cheese",D136:"Cheddar Cheese",D518:"Ham",D317:"Steak",D171:"Pickles",D169:"Jalape\xf1os",D170:"Spinach",D163:"Tomatoes",D164:"Onions",D165:"Cucumbers",D166:"Green Peppers",D173:"Banana Peppers",D167:"Black Olives",D162:"Lettuce",D145:"Ranch",D147:"BBQ Sauce",D149:"Hot Sauce",D154:"Honey Mustard",D156:"Chipotle Southwest",D157:"Light Mayonnaise",D146:"Italian Dressing",D141:"Mayonnaise",D151:"Oil & Vinegar",D144:"Ketchup",D174:"Vinegar",D153:"Sweet Onion",D143:"Mustard",D668:"Sriracha",D1478:"Buffalo Sauce",D160:"Pepper",D159:"Salt",2575:"Double Meat",2594:"Extra Bread",2590:"Extra Toppings",3668:"Premium Sauces",2588:"Extra Sauce",2407:"Extra Cheese",2435:"Premium Toppings"},A=e=>{if(Array.isArray(e)){if(0===e.length)return"No customizations";let s={};return e.forEach(e=>{let r=I[e]||"Option ".concat(e),a="Other";e.startsWith("D1")&&["D134","D129","D133","D131","D854"].includes(e)?a="Bread":e.startsWith("D1")&&["D139","D138","D136"].includes(e)?a="Cheese":e.startsWith("D5")||"D317"===e?a="Protein":e.startsWith("D1")&&["D171","D169","D170","D163","D164","D165","D166","D173","D167","D162"].includes(e)?a="Vegetables":e.startsWith("D1")&&["D145","D147","D149","D154","D156","D157","D146","D141","D151","D144","D174","D153","D143","D668","D1478"].includes(e)?a="Sauces":["D160","D159"].includes(e)?a="Seasonings":["2575","2594","2590","3668","2588","2407","2435"].includes(e)&&(a="Extras"),s[a]||(s[a]=[]),s[a].push(r)}),Object.entries(s).map(e=>{let[s,r]=e;return"".concat(s,": ").concat(r.join(", "))}).join(" | ")}return e&&0!==Object.keys(e).length?Object.entries(e).map(e=>{let[s,r]=e;if(!Array.isArray(r)||0===r.length)return null;let a=s.charAt(0).toUpperCase()+s.slice(1);return"".concat(a,": ").concat(r.join(", "))}).filter(Boolean).join(" | "):"No customizations"},P=w.reduce((e,s)=>e+(s.totalPrice||s.price*s.quantity),0),F=w.length>0?2.99:0,T=P+F;(0,n.useEffect)(()=>{0!==w.length||v||e.push("/cart")},[w,v,e]);let O=(e,s,r)=>{f(a=>({...a,[e]:{...a[e],[s]:r}}))},B=async s=>{if(s.preventDefault(),b){alert("Please fix the card errors before proceeding.");return}if(!S){alert("Please wait for the payment form to load.");return}N(!0),j(!0);try{var r;let s=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:w,total:T})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to create payment intent")}let{clientSecret:a,paymentIntentId:n}=await s.json();if(!m)throw Error("Stripe not initialized");let t=await S.createPaymentMethod(),i=await m,{error:c,paymentIntent:l}=await i.confirmCardPayment(a,{payment_method:t.id});if(c)throw Error(c.message);if("succeeded"!==l.status)throw Error("Payment failed");let o=await fetch("/api/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))},body:JSON.stringify({paymentIntentId:n,items:w,total:T,deliveryDetails:D.deliveryDetails,contactInfo:D.contactInfo,paymentMethod:"card"})});if(!o.ok){let e=await o.json();throw Error(e.error||"Failed to create order")}let d=await o.json();localStorage.removeItem("campus-angel-cart");let u=null===(r=d.order)||void 0===r?void 0:r.id;u?e.push("/order-tracking?orderId=".concat(u)):(console.error("No order ID returned from API:",d),alert("Order created but could not redirect. Please check your orders."),e.push("/account"))}catch(s){console.error("Error processing payment:",s);let e=s instanceof Error?s.message:"An unknown error occurred";alert("Payment failed: ".concat(e))}finally{N(!1),j(!1)}};return r?(0,a.jsx)(o.Gu,{message:"Checking authentication...",className:"checkout-hero-bg"}):d?v?(0,a.jsx)(o.Gu,{message:"Loading checkout...",className:"checkout-hero-bg"}):0===w.length?(0,a.jsx)(o.Gu,{message:"Redirecting to cart...",className:"checkout-hero-bg"}):(0,a.jsxs)("div",{className:"App",children:[(0,a.jsxs)("div",{className:"checkout-hero-bg",children:[(0,a.jsx)(o.AI,{user:s,loading:r,onLogout:h}),(0,a.jsx)("section",{className:"checkout-hero",children:(0,a.jsx)("div",{className:"checkout-hero-container",children:(0,a.jsxs)("div",{className:"checkout-hero-content",children:[(0,a.jsx)("h1",{children:"\uD83D\uDED2 Secure Checkout"}),(0,a.jsx)("p",{children:"Complete your order with our secure payment system"}),(0,a.jsxs)("div",{className:"checkout-hero-stats",children:[(0,a.jsxs)("div",{className:"modern-stat",children:[(0,a.jsx)("span",{className:"modern-stat-number",children:w.length}),(0,a.jsx)("span",{className:"modern-stat-label",children:"Items"})]}),(0,a.jsxs)("div",{className:"modern-stat",children:[(0,a.jsxs)("span",{className:"modern-stat-number",children:["$",T.toFixed(0)]}),(0,a.jsx)("span",{className:"modern-stat-label",children:"Total"})]}),(0,a.jsxs)("div",{className:"modern-stat",children:[(0,a.jsx)("span",{className:"modern-stat-number",children:"\uD83D\uDD12"}),(0,a.jsx)("span",{className:"modern-stat-label",children:"Secure"})]})]})]})})})]}),(0,a.jsx)("main",{className:"checkout-main",children:(0,a.jsx)("div",{className:"checkout-container-modern",children:(0,a.jsxs)("div",{className:"checkout-layout-modern",children:[(0,a.jsx)("div",{className:"checkout-form-modern",children:(0,a.jsxs)("form",{onSubmit:B,children:[(0,a.jsxs)("section",{className:"form-section-modern",children:[(0,a.jsxs)("div",{className:"section-header-modern",children:[(0,a.jsx)("h2",{children:"\uD83D\uDCCD Delivery Details"}),(0,a.jsx)("p",{children:"Where should we deliver your order?"})]}),(0,a.jsxs)("div",{className:"form-grid",children:[(0,a.jsxs)("div",{className:"form-group-modern",children:[(0,a.jsx)("label",{htmlFor:"building",children:"Building *"}),(0,a.jsxs)("div",{className:"input-wrapper-modern",children:[(0,a.jsx)("span",{className:"input-icon",children:"\uD83C\uDFE2"}),(0,a.jsx)("input",{type:"text",id:"building",className:"form-input-modern",value:D.deliveryDetails.building,onChange:e=>O("deliveryDetails","building",e.target.value),required:!0,placeholder:"e.g., Student Center"})]})]}),(0,a.jsxs)("div",{className:"form-group-modern",children:[(0,a.jsx)("label",{htmlFor:"room",children:"Room/Area *"}),(0,a.jsxs)("div",{className:"input-wrapper-modern",children:[(0,a.jsx)("span",{className:"input-icon",children:"\uD83D\uDEAA"}),(0,a.jsx)("input",{type:"text",id:"room",className:"form-input-modern",value:D.deliveryDetails.room,onChange:e=>O("deliveryDetails","room",e.target.value),required:!0,placeholder:"e.g., Room 101, Library"})]})]})]}),(0,a.jsxs)("div",{className:"form-group-modern",children:[(0,a.jsx)("label",{htmlFor:"instructions",children:"Delivery Instructions"}),(0,a.jsxs)("div",{className:"input-wrapper-modern",children:[(0,a.jsx)("span",{className:"input-icon",children:"\uD83D\uDCDD"}),(0,a.jsx)("textarea",{id:"instructions",className:"form-input-modern",value:D.deliveryDetails.instructions,onChange:e=>O("deliveryDetails","instructions",e.target.value),placeholder:"Any special instructions for delivery...",rows:3})]})]})]}),(0,a.jsxs)("section",{className:"form-section-modern",children:[(0,a.jsxs)("div",{className:"section-header-modern",children:[(0,a.jsx)("h2",{children:"\uD83D\uDCDE Contact Information"}),(0,a.jsx)("p",{children:"How can we reach you for delivery updates?"})]}),(0,a.jsxs)("div",{className:"form-group-modern",children:[(0,a.jsx)("label",{htmlFor:"name",children:"Full Name *"}),(0,a.jsxs)("div",{className:"input-wrapper-modern",children:[(0,a.jsx)("span",{className:"input-icon",children:"\uD83D\uDC64"}),(0,a.jsx)("input",{type:"text",id:"name",className:"form-input-modern",value:D.contactInfo.name,onChange:e=>O("contactInfo","name",e.target.value),required:!0,placeholder:"Your full name"})]})]}),(0,a.jsxs)("div",{className:"form-grid",children:[(0,a.jsxs)("div",{className:"form-group-modern",children:[(0,a.jsx)("label",{htmlFor:"phone",children:"Phone Number *"}),(0,a.jsxs)("div",{className:"input-wrapper-modern",children:[(0,a.jsx)("span",{className:"input-icon",children:"\uD83D\uDCF1"}),(0,a.jsx)("input",{type:"tel",id:"phone",className:"form-input-modern",value:D.contactInfo.phone,onChange:e=>O("contactInfo","phone",e.target.value),required:!0,placeholder:"+1234567890"})]})]}),(0,a.jsxs)("div",{className:"form-group-modern",children:[(0,a.jsx)("label",{htmlFor:"email",children:"Email *"}),(0,a.jsxs)("div",{className:"input-wrapper-modern",children:[(0,a.jsx)("span",{className:"input-icon",children:"\uD83D\uDCE7"}),(0,a.jsx)("input",{type:"email",id:"email",className:"form-input-modern",value:D.contactInfo.email,onChange:e=>O("contactInfo","email",e.target.value),required:!0,placeholder:"your.email@university.edu"})]})]})]})]}),(0,a.jsxs)("section",{className:"form-section-modern",children:[(0,a.jsxs)("div",{className:"section-header-modern",children:[(0,a.jsx)("h2",{children:"\uD83D\uDCB3 Payment Method"}),(0,a.jsx)("p",{children:"Secure payment powered by Stripe"})]}),(0,a.jsxs)("div",{className:"payment-info-modern",children:[(0,a.jsx)("div",{className:"payment-icon-modern",children:"\uD83D\uDCB3"}),(0,a.jsxs)("div",{className:"payment-text",children:[(0,a.jsx)("h4",{children:"Credit/Debit Card"}),(0,a.jsx)("p",{children:"Your payment information is secure and encrypted"})]}),(0,a.jsxs)("div",{className:"payment-badges",children:[(0,a.jsx)("span",{className:"badge",children:"\uD83D\uDCB3 Visa"}),(0,a.jsx)("span",{className:"badge",children:"\uD83D\uDCB3 MC"}),(0,a.jsx)("span",{className:"badge",children:"\uD83D\uDD12 SSL"})]})]}),m&&(0,a.jsx)("div",{className:"stripe-section-modern",children:(0,a.jsx)(i.Elements,{stripe:m,children:(0,a.jsx)(u,{amount:T,onCardError:k,onPaymentMethodReady:C})})})]}),(0,a.jsx)("button",{type:"submit",className:"btn-place-order",disabled:g||x||!!b||!S,children:x?"⏳ Processing Payment...":g?"\uD83D\uDCE6 Processing Order...":"\uD83D\uDED2 Place Order - $".concat(T.toFixed(2))})]})}),(0,a.jsxs)("div",{className:"order-summary-checkout",children:[(0,a.jsxs)("div",{className:"summary-header-checkout",children:[(0,a.jsx)("h2",{children:"Order Summary"}),(0,a.jsx)("div",{className:"summary-icon",children:"\uD83D\uDCCB"})]}),(0,a.jsx)("div",{className:"order-items-checkout",children:w.map((e,s)=>{let r=A(e.customizations);return(0,a.jsxs)("div",{className:"order-item-checkout",children:[(0,a.jsxs)("div",{className:"item-info-checkout",children:[(0,a.jsx)("h4",{children:e.name}),(0,a.jsx)("p",{className:"customizations-checkout",children:r}),(0,a.jsxs)("p",{className:"quantity-checkout",children:["Qty: ",e.quantity]})]}),(0,a.jsxs)("div",{className:"item-price-checkout",children:["$",(e.totalPrice||e.price*e.quantity).toFixed(2)]})]},s)})}),(0,a.jsxs)("div",{className:"order-totals-checkout",children:[(0,a.jsxs)("div",{className:"total-line-checkout",children:[(0,a.jsx)("span",{children:"Subtotal:"}),(0,a.jsxs)("span",{children:["$",P.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"total-line-checkout",children:[(0,a.jsx)("span",{children:"Delivery Fee:"}),(0,a.jsxs)("span",{children:["$",F.toFixed(2)]})]}),(0,a.jsx)("div",{className:"summary-divider"}),(0,a.jsxs)("div",{className:"total-line-checkout total",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{children:["$",T.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"delivery-info-checkout",children:[(0,a.jsx)("h4",{children:"\uD83D\uDE9A Delivery Details"}),(0,a.jsxs)("div",{className:"delivery-details",children:[(0,a.jsx)("p",{children:"\uD83D\uDD52 20-30 minutes"}),(0,a.jsx)("p",{children:"\uD83D\uDCCD Campus delivery only"}),(0,a.jsx)("p",{children:"\uD83D\uDD14 SMS updates included"})]})]})]})]})})})]}):(0,a.jsx)(o.ZG,{message:"Authentication Required",submessage:"You must be logged in to access the checkout page.",className:"checkout-hero-bg"})}},6672:function(e,s,r){"use strict";r.d(s,{AI:function(){return t},Gu:function(){return i},Te:function(){return l},ZG:function(){return c}});var a=r(7437),n=r(7648);function t(e){let{user:s,loading:r,onLogout:t}=e;return(0,a.jsx)("header",{className:"modern-header",children:(0,a.jsxs)("nav",{className:"modern-nav",children:[(0,a.jsx)(n.default,{href:"/",className:"modern-logo",children:"Campus Angel"}),(0,a.jsxs)("ul",{className:"modern-nav-links",children:[(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/",children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/restaurants",children:"Restaurants"})}),(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/account",children:"Account"})}),(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/cart",children:"Cart"})})]}),(0,a.jsx)("div",{className:"modern-auth-buttons",children:r?(0,a.jsx)("div",{className:"auth-loading",children:"⏳"}):s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{href:"/account",className:"btn btn-outline-modern",children:"My Account"}),(0,a.jsx)(n.default,{href:"/cart",className:"btn btn-primary-modern",children:"Cart"}),(0,a.jsx)("button",{onClick:t,className:"btn btn-secondary-modern",children:"Logout"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{href:"/login",className:"btn btn-outline-modern",children:"Log In"}),(0,a.jsx)(n.default,{href:"/register",className:"btn btn-primary-modern",children:"Sign Up"})]})})]})})}function i(e){let{message:s="Loading...",submessage:r,className:n="hero-bg"}=e;return(0,a.jsx)("div",{className:"App",children:(0,a.jsxs)("div",{className:n,children:[(0,a.jsx)(t,{}),(0,a.jsx)("main",{className:"loading-main",children:(0,a.jsx)("div",{className:"loading-container-modern",children:(0,a.jsxs)("div",{className:"loading-content",children:[(0,a.jsx)("div",{className:"loading-spinner",children:"⏳"}),(0,a.jsx)("h2",{children:s}),r&&(0,a.jsx)("p",{children:r})]})})})]})})}function c(e){let{message:s="Authentication Required",submessage:r="You must be logged in to access this page.",className:i="hero-bg"}=e;return(0,a.jsx)("div",{className:"App",children:(0,a.jsxs)("div",{className:i,children:[(0,a.jsx)(t,{}),(0,a.jsx)("main",{className:"auth-required-main",children:(0,a.jsx)("div",{className:"auth-required-container-modern",children:(0,a.jsxs)("div",{className:"auth-required-content",children:[(0,a.jsx)("div",{className:"auth-icon",children:"\uD83D\uDD12"}),(0,a.jsx)("h2",{children:s}),(0,a.jsx)("p",{children:r}),(0,a.jsxs)("div",{className:"auth-actions-modern",children:[(0,a.jsx)(n.default,{href:"/login",className:"btn-auth-primary",children:"\uD83D\uDD11 Login"}),(0,a.jsx)(n.default,{href:"/register",className:"btn-auth-secondary",children:"\uD83D\uDCDD Register"})]})]})})})]})})}function l(e){let{title:s="Something went wrong",message:r,primaryAction:i,secondaryAction:c,className:l="hero-bg"}=e;return(0,a.jsx)("div",{className:"App",children:(0,a.jsxs)("div",{className:l,children:[(0,a.jsx)(t,{}),(0,a.jsx)("main",{className:"error-main",children:(0,a.jsx)("div",{className:"error-container-modern",children:(0,a.jsxs)("div",{className:"error-content",children:[(0,a.jsx)("div",{className:"error-icon",children:"❌"}),(0,a.jsx)("h2",{children:s}),(0,a.jsx)("p",{children:r}),(0,a.jsxs)("div",{className:"error-actions",children:[i&&(0,a.jsxs)(n.default,{href:i.href,className:"btn-error-primary",children:[i.icon," ",i.text]}),c&&(0,a.jsxs)(n.default,{href:c.href,className:"btn-error-secondary",children:[c.icon," ",c.text]})]})]})})})]})})}},8734:function(e,s,r){"use strict";r.d(s,{a:function(){return t}});var a=r(2265),n=r(9376);function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{requireAuth:s=!1,redirectToLogin:r=!1}=e,t=(0,n.useRouter)(),[i,c]=(0,a.useState)({user:null,loading:!0,error:null}),l=(0,a.useCallback)(async()=>{try{let e=localStorage.getItem("accessToken");if(!e){c({user:null,loading:!1,error:null}),s&&r&&t.push("/login");return}let a=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(a.ok){let e=await a.json();c({user:e.user,loading:!1,error:null})}else if(401===a.status){let e=localStorage.getItem("refreshToken");if(e)try{let s=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(s.ok){let e=await s.json();localStorage.setItem("accessToken",e.session.accessToken),localStorage.setItem("refreshToken",e.session.refreshToken);let r=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e.session.accessToken),"Content-Type":"application/json"}});if(r.ok){let e=await r.json();c({user:e.user,loading:!1,error:null})}else o()}else o()}catch(e){console.error("Token refresh error:",e),o()}else o()}else o()}catch(e){console.error("Auth check error:",e),c({user:null,loading:!1,error:"Failed to check authentication"}),s&&r&&t.push("/login")}},[s,r,t]),o=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c({user:null,loading:!1,error:null}),s&&r&&t.push("/login")};return(0,a.useEffect)(()=>{l()},[l]),{user:i.user,loading:i.loading,error:i.error,isAuthenticated:!!i.user,logout:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c({user:null,loading:!1,error:null}),t.push("/")},refreshAuth:()=>{c(e=>({...e,loading:!0})),l()}}}}},function(e){e.O(0,[648,643,971,117,744],function(){return e(e.s=7019)}),_N_E=e.O()}]);