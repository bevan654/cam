(()=>{var e={};e.id=439,e.ids=[439],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2101:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>d}),r(3802),r(2029),r(5866);var a=r(3191),n=r(8716),t=r(7922),i=r.n(t),l=r(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);r.d(s,c);let d=["",{children:["order-tracking",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3802)),"C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\order-tracking\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\order-tracking\\page.tsx"],u="/order-tracking/page",h={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/order-tracking/page",pathname:"/order-tracking",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2620:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},8094:()=>{},5687:(e,s,r)=>{Promise.resolve().then(r.bind(r,8922))},8922:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var a=r(326),n=r(7577),t=r(5047),i=r(434),l=r(4131),c=r(8056);let d=[{status:"placed",description:"Order Placed",icon:"\uD83D\uDCDD",completed:!1,current:!1},{status:"confirmed",description:"Order Confirmed",icon:"✅",completed:!1,current:!1},{status:"picked_up",description:"Order Picked Up",icon:"\uD83D\uDE9A",completed:!1,current:!1},{status:"delivered",description:"Order Delivered",icon:"\uD83C\uDFAF",completed:!1,current:!1}];function o(){(0,t.useRouter)(),(0,t.useSearchParams)();let{user:e,loading:s,logout:r}=(0,l.a)(),[o,u]=(0,n.useState)(null),[h,m]=(0,n.useState)(null),[x,p]=(0,n.useState)(!0),[j,g]=(0,n.useState)(null),[v,N]=(0,n.useState)(new Date),f=async e=>{try{let s=localStorage.getItem("accessToken");if(!s){g("Authentication required"),p(!1);return}let r=await fetch(`/api/validate-order?orderId=${e}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!r.ok){404===r.status?g("Order not found or access denied"):401===r.status?g("Authentication failed"):g("Failed to fetch order"),p(!1);return}let a=await r.json();m(a.order),N(new Date),p(!1)}catch(e){console.error("Error fetching order:",e),g("Failed to fetch order"),p(!1)}},D=e=>d.findIndex(s=>s.status===e),b=e=>{switch(e){case"placed":return"2-3 minutes";case"confirmed":return"5-10 minutes";case"picked_up":return"10-15 minutes";case"delivered":return"Delivered!";default:return"Unknown"}};if(x)return a.jsx(c.Gu,{message:"Loading Order...",submessage:"Please wait while we fetch your order details.",className:"tracking-hero-bg"});if(j||!h)return a.jsx(c.Te,{title:"Order Not Found",message:j||"Unable to find order details. Please check your order history or contact support.",primaryAction:{text:"View Orders",href:"/account",icon:"\uD83D\uDCCB"},secondaryAction:{text:"Order Again",href:"/restaurants",icon:"\uD83C\uDF7D️"},className:"tracking-hero-bg"});let k=(e=>{let s=D(e.status);return d.map((r,a)=>({...r,completed:a<=s,current:a===s&&"delivered"!==e.status}))})(h);return(0,a.jsxs)("div",{className:"App",children:[(0,a.jsxs)("div",{className:"tracking-hero-bg",children:[a.jsx(c.AI,{user:e,loading:s,onLogout:r}),a.jsx("section",{className:"tracking-hero",children:a.jsx("div",{className:"tracking-hero-container",children:(0,a.jsxs)("div",{className:"tracking-hero-content",children:[a.jsx("div",{className:"tracking-icon",children:"\uD83D\uDCCD"}),a.jsx("h1",{children:"Track Your Order"}),(0,a.jsxs)("p",{className:"order-id-modern",children:["Order #",h.id.slice(0,8)]}),a.jsx("p",{children:"Real-time updates on your order status and delivery progress"}),(0,a.jsxs)("div",{className:"tracking-hero-stats",children:[(0,a.jsxs)("div",{className:"modern-stat",children:[(0,a.jsxs)("span",{className:"modern-stat-number",children:["$",h.total.toFixed(0)]}),a.jsx("span",{className:"modern-stat-label",children:"Total"})]}),(0,a.jsxs)("div",{className:"modern-stat",children:[a.jsx("span",{className:"modern-stat-number",children:b(h.status)}),a.jsx("span",{className:"modern-stat-label",children:"Est. Time"})]}),(0,a.jsxs)("div",{className:"modern-stat",children:[a.jsx("span",{className:"modern-stat-number",children:"\uD83D\uDFE2"}),a.jsx("span",{className:"modern-stat-label",children:"Live"})]})]}),(0,a.jsxs)("div",{className:"last-updated-modern",children:["Last updated: ",v.toLocaleTimeString(),a.jsx("span",{className:"live-indicator",children:"\uD83D\uDFE2 Auto-updating"})]})]})})})]}),a.jsx("main",{className:"tracking-main",children:a.jsx("div",{className:"tracking-container-modern",children:(0,a.jsxs)("div",{className:"tracking-layout",children:[(0,a.jsxs)("div",{className:"tracking-timeline-modern",children:[(0,a.jsxs)("div",{className:"timeline-header",children:[a.jsx("h2",{children:"\uD83D\uDCE6 Order Progress"}),a.jsx("span",{className:`status-badge-tracking ${h.status}`,children:h.status.replace("_"," ").toUpperCase()})]}),a.jsx("div",{className:"timeline-modern",children:k.map((e,s)=>(0,a.jsxs)("div",{className:`timeline-item-modern ${e.completed?"completed":""} ${e.current?"current":""}`,children:[a.jsx("div",{className:"timeline-icon-modern",children:e.completed?"✅":e.current?"⏳":e.icon}),(0,a.jsxs)("div",{className:"timeline-content-modern",children:[a.jsx("h3",{children:e.description}),a.jsx("p",{children:e.completed?"delivered"===e.status?"Delivered!":"Completed":e.current?`In progress - ${b(e.status)}`:"Pending"}),e.current&&a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill"})})]})]},e.status))})]}),(0,a.jsxs)("div",{className:"tracking-details",children:[(0,a.jsxs)("div",{className:"details-card",children:[(0,a.jsxs)("div",{className:"card-header",children:[a.jsx("h3",{children:"\uD83D\uDCCB Order Summary"}),(0,a.jsxs)("span",{className:"order-total",children:["$",h.total.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"card-content",children:[(0,a.jsxs)("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Order Date:"}),a.jsx("span",{className:"value",children:new Date(h.created_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Payment:"}),(0,a.jsxs)("span",{className:"value",children:["\uD83D\uDCB3 ",h.payment_method]})]}),(0,a.jsxs)("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Items:"}),(0,a.jsxs)("span",{className:"value",children:[h.items.length," item",1!==h.items.length?"s":""]})]})]})]}),(0,a.jsxs)("div",{className:"details-card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h3",{children:"\uD83C\uDFE2 Delivery Address"})}),a.jsx("div",{className:"card-content",children:(0,a.jsxs)("div",{className:"delivery-address",children:[a.jsx("div",{className:"address-line",children:a.jsx("strong",{children:h.delivery_details.building})}),a.jsx("div",{className:"address-line",children:h.delivery_details.room}),h.delivery_details.instructions&&(0,a.jsxs)("div",{className:"delivery-instructions",children:[a.jsx("span",{className:"instructions-label",children:"Instructions:"}),a.jsx("span",{className:"instructions-text",children:h.delivery_details.instructions})]})]})})]}),(0,a.jsxs)("div",{className:"details-card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h3",{children:"\uD83D\uDCDE Contact Info"})}),a.jsx("div",{className:"card-content",children:(0,a.jsxs)("div",{className:"contact-info",children:[(0,a.jsxs)("div",{className:"contact-row",children:[a.jsx("span",{className:"contact-label",children:"Name:"}),a.jsx("span",{className:"contact-value",children:h.contact_info.name})]}),(0,a.jsxs)("div",{className:"contact-row",children:[a.jsx("span",{className:"contact-label",children:"Phone:"}),a.jsx("span",{className:"contact-value",children:h.contact_info.phone})]})]})})]}),(0,a.jsxs)("div",{className:"action-buttons-tracking",children:[a.jsx("button",{onClick:()=>f(h.id),className:"btn-refresh",disabled:x,children:x?"⏳ Refreshing...":"\uD83D\uDD04 Refresh Status"}),a.jsx(i.default,{href:"/account",className:"btn-view-orders-tracking",children:"\uD83D\uDCCB View All Orders"}),a.jsx(i.default,{href:"/restaurants",className:"btn-order-again",children:"\uD83C\uDF7D️ Order Again"})]}),(0,a.jsxs)("div",{className:"support-info-modern",children:[a.jsx("h4",{children:"Need Help?"}),a.jsx("p",{children:"\uD83D\uDCE7 support@campusangel.com"}),a.jsx("p",{children:"\uD83D\uDCF1 1-800-CAMPUS"}),a.jsx("p",{className:"auto-update",children:"\uD83D\uDD04 Status updates every 30 seconds"})]})]})]})})})]})}},8056:(e,s,r)=>{"use strict";r.d(s,{AI:()=>t,Gu:()=>i,Te:()=>c,ZG:()=>l});var a=r(326),n=r(434);function t({user:e,loading:s,onLogout:r}){return a.jsx("header",{className:"modern-header",children:(0,a.jsxs)("nav",{className:"modern-nav",children:[a.jsx(n.default,{href:"/",className:"modern-logo",children:"Campus Angel"}),(0,a.jsxs)("ul",{className:"modern-nav-links",children:[a.jsx("li",{children:a.jsx(n.default,{href:"/",children:"Home"})}),a.jsx("li",{children:a.jsx(n.default,{href:"/restaurants",children:"Restaurants"})}),a.jsx("li",{children:a.jsx(n.default,{href:"/account",children:"Account"})}),a.jsx("li",{children:a.jsx(n.default,{href:"/cart",children:"Cart"})})]}),a.jsx("div",{className:"modern-auth-buttons",children:s?a.jsx("div",{className:"auth-loading",children:"⏳"}):e?(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.default,{href:"/account",className:"btn btn-outline-modern",children:"My Account"}),a.jsx(n.default,{href:"/cart",className:"btn btn-primary-modern",children:"Cart"}),a.jsx("button",{onClick:r,className:"btn btn-secondary-modern",children:"Logout"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.default,{href:"/login",className:"btn btn-outline-modern",children:"Log In"}),a.jsx(n.default,{href:"/register",className:"btn btn-primary-modern",children:"Sign Up"})]})})]})})}function i({message:e="Loading...",submessage:s,className:r="hero-bg"}){return a.jsx("div",{className:"App",children:(0,a.jsxs)("div",{className:r,children:[a.jsx(t,{}),a.jsx("main",{className:"loading-main",children:a.jsx("div",{className:"loading-container-modern",children:(0,a.jsxs)("div",{className:"loading-content",children:[a.jsx("div",{className:"loading-spinner",children:"⏳"}),a.jsx("h2",{children:e}),s&&a.jsx("p",{children:s})]})})})]})})}function l({message:e="Authentication Required",submessage:s="You must be logged in to access this page.",className:r="hero-bg"}){return a.jsx("div",{className:"App",children:(0,a.jsxs)("div",{className:r,children:[a.jsx(t,{}),a.jsx("main",{className:"auth-required-main",children:a.jsx("div",{className:"auth-required-container-modern",children:(0,a.jsxs)("div",{className:"auth-required-content",children:[a.jsx("div",{className:"auth-icon",children:"\uD83D\uDD12"}),a.jsx("h2",{children:e}),a.jsx("p",{children:s}),(0,a.jsxs)("div",{className:"auth-actions-modern",children:[a.jsx(n.default,{href:"/login",className:"btn-auth-primary",children:"\uD83D\uDD11 Login"}),a.jsx(n.default,{href:"/register",className:"btn-auth-secondary",children:"\uD83D\uDCDD Register"})]})]})})})]})})}function c({title:e="Something went wrong",message:s,primaryAction:r,secondaryAction:i,className:l="hero-bg"}){return a.jsx("div",{className:"App",children:(0,a.jsxs)("div",{className:l,children:[a.jsx(t,{}),a.jsx("main",{className:"error-main",children:a.jsx("div",{className:"error-container-modern",children:(0,a.jsxs)("div",{className:"error-content",children:[a.jsx("div",{className:"error-icon",children:"❌"}),a.jsx("h2",{children:e}),a.jsx("p",{children:s}),(0,a.jsxs)("div",{className:"error-actions",children:[r&&(0,a.jsxs)(n.default,{href:r.href,className:"btn-error-primary",children:[r.icon," ",r.text]}),i&&(0,a.jsxs)(n.default,{href:i.href,className:"btn-error-secondary",children:[i.icon," ",i.text]})]})]})})})]})})}},4131:(e,s,r)=>{"use strict";r.d(s,{a:()=>t});var a=r(7577),n=r(5047);function t(e={}){let{requireAuth:s=!1,redirectToLogin:r=!1}=e,t=(0,n.useRouter)(),[i,l]=(0,a.useState)({user:null,loading:!0,error:null}),c=(0,a.useCallback)(async()=>{try{let e=localStorage.getItem("accessToken");if(!e){l({user:null,loading:!1,error:null}),s&&r&&t.push("/login");return}let a=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(a.ok){let e=await a.json();l({user:e.user,loading:!1,error:null})}else if(401===a.status){let e=localStorage.getItem("refreshToken");if(e)try{let s=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(s.ok){let e=await s.json();localStorage.setItem("accessToken",e.session.accessToken),localStorage.setItem("refreshToken",e.session.refreshToken);let r=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e.session.accessToken}`,"Content-Type":"application/json"}});if(r.ok){let e=await r.json();l({user:e.user,loading:!1,error:null})}else d()}else d()}catch(e){console.error("Token refresh error:",e),d()}else d()}else d()}catch(e){console.error("Auth check error:",e),l({user:null,loading:!1,error:"Failed to check authentication"}),s&&r&&t.push("/login")}},[s,r,t]),d=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),l({user:null,loading:!1,error:null}),s&&r&&t.push("/login")};return{user:i.user,loading:i.loading,error:i.error,isAuthenticated:!!i.user,logout:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),l({user:null,loading:!1,error:null}),t.push("/")},refreshAuth:()=>{l(e=>({...e,loading:!0})),c()}}}},2029:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l,metadata:()=>i});var a=r(9510),n=r(5384),t=r.n(n);r(1141);let i={title:"Campus Angel - University Food Delivery",description:"Your campus food angel is here! Order delicious food from campus restaurants with fast delivery."};function l({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:t().className,children:e})})}},3802:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\Bevan\uni-food-delivery\src\app\order-tracking\page.tsx#default`)},1141:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[276,349,496],()=>r(2101));module.exports=a})();