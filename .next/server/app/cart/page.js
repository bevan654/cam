(()=>{var e={};e.id=565,e.ids=[565],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9422:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>o}),a(1753),a(2029),a(5866);var r=a(3191),n=a(8716),t=a(7922),i=a.n(t),l=a(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(s,c);let o=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1753)),"C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\cart\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2029)),"C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\cart\\page.tsx"],m="/cart/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2620:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},8094:()=>{},4401:(e,s,a)=>{Promise.resolve().then(a.bind(a,2286))},2286:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var r=a(326),n=a(7577),t=a(5047),i=a(434),l=a(4131),c=a(8056);function o(){let e=(0,t.useRouter)(),{user:s,loading:a,logout:o}=(0,l.a)(),[d,m]=(0,n.useState)([]),[u,h]=(0,n.useState)(!0),x=(e,s)=>{if(s<=0){let s=d.filter(s=>j(s)!==e);m(s),localStorage.setItem("campus-angel-cart",JSON.stringify(s))}else{let a=d.map(a=>j(a)===e?{...a,quantity:s,totalPrice:a.price*s}:a);m(a),localStorage.setItem("campus-angel-cart",JSON.stringify(a))}},j=e=>Array.isArray(e.customizations)?`${e.id}-${e.buildId}-${e.customizations.sort().join(",")}`:`${e.id}-${e.buildId}-${Object.entries(e.customizations).sort(([e],[s])=>e.localeCompare(s)).map(([e,s])=>`${e}:${Array.isArray(s)?s.sort().join(","):""}`).join("|")}`,p={D134:"White Bread",D129:"Italian Bread",D133:"Flatbread",D131:"Wheat Bread",D854:"Multigrain Flatbread",D139:"American Cheese",D138:"Swiss Cheese",D136:"Cheddar Cheese",D518:"Ham",D317:"Steak",D171:"Pickles",D169:"Jalape\xf1os",D170:"Spinach",D163:"Tomatoes",D164:"Onions",D165:"Cucumbers",D166:"Green Peppers",D173:"Banana Peppers",D167:"Black Olives",D162:"Lettuce",D145:"Ranch",D147:"BBQ Sauce",D149:"Hot Sauce",D154:"Honey Mustard",D156:"Chipotle Southwest",D157:"Light Mayonnaise",D146:"Italian Dressing",D141:"Mayonnaise",D151:"Oil & Vinegar",D144:"Ketchup",D174:"Vinegar",D153:"Sweet Onion",D143:"Mustard",D668:"Sriracha",D1478:"Buffalo Sauce",D160:"Pepper",D159:"Salt",2575:"Double Meat",2594:"Extra Bread",2590:"Extra Toppings",3668:"Premium Sauces",2588:"Extra Sauce",2407:"Extra Cheese",2435:"Premium Toppings"},D=e=>{if(Array.isArray(e)){if(0===e.length)return r.jsx("div",{className:"customization-item",children:r.jsx("span",{className:"customization-label",children:"No customizations"})});let s={};return e.forEach(e=>{let a=p[e]||`Option ${e}`,r="Other";e.startsWith("D1")&&["D134","D129","D133","D131","D854"].includes(e)?r="Bread":e.startsWith("D1")&&["D139","D138","D136"].includes(e)?r="Cheese":e.startsWith("D5")||"D317"===e?r="Protein":e.startsWith("D1")&&["D171","D169","D170","D163","D164","D165","D166","D173","D167","D162"].includes(e)?r="Vegetables":e.startsWith("D1")&&["D145","D147","D149","D154","D156","D157","D146","D141","D151","D144","D174","D153","D143","D668","D1478"].includes(e)?r="Sauces":["D160","D159"].includes(e)?r="Seasonings":["2575","2594","2590","3668","2588","2407","2435"].includes(e)&&(r="Extras"),s[r]||(s[r]=[]),s[r].push(a)}),Object.entries(s).map(([e,s])=>(0,r.jsxs)("div",{className:"customization-item",children:[(0,r.jsxs)("span",{className:"customization-label",children:[e,":"]}),r.jsx("span",{className:"customization-values",children:s.join(", ")})]},e))}if(!e||0===Object.keys(e).length)return r.jsx("div",{className:"customization-item",children:r.jsx("span",{className:"customization-label",children:"No customizations"})});let s=Object.entries(e).filter(([e,s])=>Array.isArray(s)&&s.length>0);return 0===s.length?r.jsx("div",{className:"customization-item",children:r.jsx("span",{className:"customization-label",children:"No customizations"})}):s.map(([e,s])=>{let a=e.charAt(0).toUpperCase()+e.slice(1);return(0,r.jsxs)("div",{className:"customization-item",children:[(0,r.jsxs)("span",{className:"customization-label",children:[a,":"]}),r.jsx("span",{className:"customization-values",children:s.join(", ")})]},e)})},v=e=>e.totalPrice||e.price*e.quantity,g=d.reduce((e,s)=>e+v(s),0),N=d.length>0?2.99:0;return u?r.jsx("div",{className:"App",children:(0,r.jsxs)("div",{className:"cart-hero-bg",children:[r.jsx(c.AI,{user:s,loading:a,onLogout:o}),r.jsx("main",{className:"cart-main",children:r.jsx("div",{className:"cart-container-modern",children:(0,r.jsxs)("div",{className:"cart-loading",children:[r.jsx("div",{className:"loading-spinner",children:"⏳"}),r.jsx("h2",{children:"Loading your cart..."})]})})})]})}):0===d.length?r.jsx("div",{className:"App",children:(0,r.jsxs)("div",{className:"cart-hero-bg",children:[r.jsx(c.AI,{user:s,loading:a,onLogout:o}),r.jsx("main",{className:"cart-main",children:r.jsx("div",{className:"cart-container-modern",children:(0,r.jsxs)("div",{className:"empty-cart-modern",children:[r.jsx("div",{className:"empty-cart-icon",children:"\uD83D\uDED2"}),r.jsx("h1",{children:"Your cart is empty"}),r.jsx("p",{children:"Looks like you haven't added any items to your cart yet. Discover delicious food from campus restaurants!"}),r.jsx(i.default,{href:"/restaurants",className:"btn-cart-primary",children:"\uD83C\uDF7D️ Browse Restaurants"})]})})})]})}):(0,r.jsxs)("div",{className:"App",children:[(0,r.jsxs)("div",{className:"cart-hero-bg",children:[r.jsx(c.AI,{user:s,loading:a,onLogout:o}),r.jsx("section",{className:"cart-hero",children:r.jsx("div",{className:"cart-hero-container",children:(0,r.jsxs)("div",{className:"cart-hero-content",children:[r.jsx("h1",{children:"\uD83D\uDED2 Your Cart"}),r.jsx("p",{children:"Review your delicious selections and checkout when ready!"}),(0,r.jsxs)("div",{className:"cart-hero-stats",children:[(0,r.jsxs)("div",{className:"modern-stat",children:[r.jsx("span",{className:"modern-stat-number",children:d.length}),r.jsx("span",{className:"modern-stat-label",children:"Items"})]}),(0,r.jsxs)("div",{className:"modern-stat",children:[(0,r.jsxs)("span",{className:"modern-stat-number",children:["$",g.toFixed(0)]}),r.jsx("span",{className:"modern-stat-label",children:"Subtotal"})]}),(0,r.jsxs)("div",{className:"modern-stat",children:[r.jsx("span",{className:"modern-stat-number",children:"20min"}),r.jsx("span",{className:"modern-stat-label",children:"Est. Delivery"})]})]})]})})})]}),r.jsx("main",{className:"cart-main",children:(0,r.jsxs)("div",{className:"cart-container-modern",children:[(0,r.jsxs)("div",{className:"cart-header-modern",children:[r.jsx("h2",{children:"Cart Items"}),r.jsx("button",{onClick:()=>{m([]),localStorage.removeItem("campus-angel-cart")},className:"btn-clear-cart",children:"\uD83D\uDDD1️ Clear Cart"})]}),(0,r.jsxs)("div",{className:"cart-layout-modern",children:[r.jsx("div",{className:"cart-items-modern",children:d.map((e,s)=>{let a=j(e);return(0,r.jsxs)("div",{className:"cart-item-modern",children:[(0,r.jsxs)("div",{className:"cart-item-header",children:[r.jsx("h3",{className:"item-name-modern",children:e.name}),(0,r.jsxs)("div",{className:"item-price-modern",children:["$",e.price.toFixed(2)," each"]})]}),r.jsx("div",{className:"item-customizations-modern",children:D(e.customizations)}),(0,r.jsxs)("div",{className:"cart-item-footer",children:[(0,r.jsxs)("div",{className:"quantity-controls-modern",children:[r.jsx("button",{onClick:()=>x(a,e.quantity-1),className:"quantity-btn-modern minus",disabled:e.quantity<=1,children:"−"}),r.jsx("span",{className:"quantity-modern",children:e.quantity}),r.jsx("button",{onClick:()=>x(a,e.quantity+1),className:"quantity-btn-modern plus",children:"+"})]}),(0,r.jsxs)("div",{className:"item-total-modern",children:["$",v(e).toFixed(2)]}),r.jsx("button",{onClick:()=>{window.confirm(`Remove "${e.name}" from cart?`)&&x(a,0)},className:"remove-btn-modern",title:`Remove ${e.name} from cart`,"aria-label":`Remove ${e.name} from cart`,children:"\uD83D\uDDD1️"})]})]},a)})}),(0,r.jsxs)("div",{className:"order-summary-modern",children:[(0,r.jsxs)("div",{className:"summary-header",children:[r.jsx("h2",{children:"Order Summary"}),r.jsx("div",{className:"summary-icon",children:"\uD83D\uDCCB"})]}),(0,r.jsxs)("div",{className:"summary-details-modern",children:[(0,r.jsxs)("div",{className:"summary-line-modern",children:[(0,r.jsxs)("span",{children:["Items (",d.length,")"]}),(0,r.jsxs)("span",{children:["$",g.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"summary-line-modern",children:[r.jsx("span",{children:"Delivery Fee"}),(0,r.jsxs)("span",{children:["$",N.toFixed(2)]})]}),r.jsx("div",{className:"summary-divider"}),(0,r.jsxs)("div",{className:"summary-line-modern total",children:[r.jsx("span",{children:"Total"}),(0,r.jsxs)("span",{children:["$",(g+N).toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"delivery-info-modern",children:[r.jsx("h4",{children:"\uD83D\uDE9A Delivery Details"}),(0,r.jsxs)("div",{className:"delivery-details",children:[r.jsx("p",{children:"\uD83D\uDD52 20-30 minutes"}),r.jsx("p",{children:"\uD83D\uDCCD Campus delivery only"})]})]}),(0,r.jsxs)("div",{className:"cart-actions",children:[r.jsx("button",{onClick:()=>e.push("/checkout"),className:"btn-checkout-modern",disabled:0===d.length,children:"\uD83D\uDED2 Proceed to Checkout"}),r.jsx(i.default,{href:"/restaurants",className:"btn-continue-shopping",children:"← Continue Shopping"})]})]})]})]})})]})}},8056:(e,s,a)=>{"use strict";a.d(s,{AI:()=>t,Gu:()=>i,Te:()=>c,ZG:()=>l});var r=a(326),n=a(434);function t({user:e,loading:s,onLogout:a}){return r.jsx("header",{className:"modern-header",children:(0,r.jsxs)("nav",{className:"modern-nav",children:[r.jsx(n.default,{href:"/",className:"modern-logo",children:"Campus Angel"}),(0,r.jsxs)("ul",{className:"modern-nav-links",children:[r.jsx("li",{children:r.jsx(n.default,{href:"/",children:"Home"})}),r.jsx("li",{children:r.jsx(n.default,{href:"/restaurants",children:"Restaurants"})}),r.jsx("li",{children:r.jsx(n.default,{href:"/account",children:"Account"})}),r.jsx("li",{children:r.jsx(n.default,{href:"/cart",children:"Cart"})})]}),r.jsx("div",{className:"modern-auth-buttons",children:s?r.jsx("div",{className:"auth-loading",children:"⏳"}):e?(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.default,{href:"/account",className:"btn btn-outline-modern",children:"My Account"}),r.jsx(n.default,{href:"/cart",className:"btn btn-primary-modern",children:"Cart"}),r.jsx("button",{onClick:a,className:"btn btn-secondary-modern",children:"Logout"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.default,{href:"/login",className:"btn btn-outline-modern",children:"Log In"}),r.jsx(n.default,{href:"/register",className:"btn btn-primary-modern",children:"Sign Up"})]})})]})})}function i({message:e="Loading...",submessage:s,className:a="hero-bg"}){return r.jsx("div",{className:"App",children:(0,r.jsxs)("div",{className:a,children:[r.jsx(t,{}),r.jsx("main",{className:"loading-main",children:r.jsx("div",{className:"loading-container-modern",children:(0,r.jsxs)("div",{className:"loading-content",children:[r.jsx("div",{className:"loading-spinner",children:"⏳"}),r.jsx("h2",{children:e}),s&&r.jsx("p",{children:s})]})})})]})})}function l({message:e="Authentication Required",submessage:s="You must be logged in to access this page.",className:a="hero-bg"}){return r.jsx("div",{className:"App",children:(0,r.jsxs)("div",{className:a,children:[r.jsx(t,{}),r.jsx("main",{className:"auth-required-main",children:r.jsx("div",{className:"auth-required-container-modern",children:(0,r.jsxs)("div",{className:"auth-required-content",children:[r.jsx("div",{className:"auth-icon",children:"\uD83D\uDD12"}),r.jsx("h2",{children:e}),r.jsx("p",{children:s}),(0,r.jsxs)("div",{className:"auth-actions-modern",children:[r.jsx(n.default,{href:"/login",className:"btn-auth-primary",children:"\uD83D\uDD11 Login"}),r.jsx(n.default,{href:"/register",className:"btn-auth-secondary",children:"\uD83D\uDCDD Register"})]})]})})})]})})}function c({title:e="Something went wrong",message:s,primaryAction:a,secondaryAction:i,className:l="hero-bg"}){return r.jsx("div",{className:"App",children:(0,r.jsxs)("div",{className:l,children:[r.jsx(t,{}),r.jsx("main",{className:"error-main",children:r.jsx("div",{className:"error-container-modern",children:(0,r.jsxs)("div",{className:"error-content",children:[r.jsx("div",{className:"error-icon",children:"❌"}),r.jsx("h2",{children:e}),r.jsx("p",{children:s}),(0,r.jsxs)("div",{className:"error-actions",children:[a&&(0,r.jsxs)(n.default,{href:a.href,className:"btn-error-primary",children:[a.icon," ",a.text]}),i&&(0,r.jsxs)(n.default,{href:i.href,className:"btn-error-secondary",children:[i.icon," ",i.text]})]})]})})})]})})}},4131:(e,s,a)=>{"use strict";a.d(s,{a:()=>t});var r=a(7577),n=a(5047);function t(e={}){let{requireAuth:s=!1,redirectToLogin:a=!1}=e,t=(0,n.useRouter)(),[i,l]=(0,r.useState)({user:null,loading:!0,error:null}),c=(0,r.useCallback)(async()=>{try{let e=localStorage.getItem("accessToken");if(!e){l({user:null,loading:!1,error:null}),s&&a&&t.push("/login");return}let r=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(r.ok){let e=await r.json();l({user:e.user,loading:!1,error:null})}else if(401===r.status){let e=localStorage.getItem("refreshToken");if(e)try{let s=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(s.ok){let e=await s.json();localStorage.setItem("accessToken",e.session.accessToken),localStorage.setItem("refreshToken",e.session.refreshToken);let a=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e.session.accessToken}`,"Content-Type":"application/json"}});if(a.ok){let e=await a.json();l({user:e.user,loading:!1,error:null})}else o()}else o()}catch(e){console.error("Token refresh error:",e),o()}else o()}else o()}catch(e){console.error("Auth check error:",e),l({user:null,loading:!1,error:"Failed to check authentication"}),s&&a&&t.push("/login")}},[s,a,t]),o=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),l({user:null,loading:!1,error:null}),s&&a&&t.push("/login")};return{user:i.user,loading:i.loading,error:i.error,isAuthenticated:!!i.user,logout:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),l({user:null,loading:!1,error:null}),t.push("/")},refreshAuth:()=>{l(e=>({...e,loading:!0})),c()}}}},1753:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`C:\Users\Bevan\uni-food-delivery\src\app\cart\page.tsx#default`)},2029:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l,metadata:()=>i});var r=a(9510),n=a(5384),t=a.n(n);a(1141);let i={title:"Campus Angel - University Food Delivery",description:"Your campus food angel is here! Order delicious food from campus restaurants with fast delivery."};function l({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:t().className,children:e})})}},1141:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[935,496],()=>a(9422));module.exports=r})();