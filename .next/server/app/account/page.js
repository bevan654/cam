(()=>{var e={};e.id=346,e.ids=[346],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},833:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),a(6147),a(2029),a(5866);var r=a(3191),n=a(8716),i=a(7922),l=a.n(i),t=a(5231),c={};for(let e in t)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>t[e]);a.d(s,c);let d=["",{children:["account",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6147)),"C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\account\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2029)),"C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\account\\page.tsx"],m="/account/page",h={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/account/page",pathname:"/account",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2620:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},8094:()=>{},110:(e,s,a)=>{Promise.resolve().then(a.bind(a,5560))},5560:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var r=a(326),n=a(7577),i=a(5047),l=a(434),t=a(4131),c=a(8056);function d(){(0,i.useRouter)();let{user:e,loading:s,isAuthenticated:a,logout:d}=(0,t.a)({requireAuth:!0,redirectToLogin:!0}),[o,m]=(0,n.useState)([]),[h,u]=(0,n.useState)(!1);return((0,n.useCallback)(async()=>{if(e){u(!0);try{let e=localStorage.getItem("accessToken");if(!e)return;let s=await fetch("/api/user-orders",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){let e=await s.json();m(e.orders||[])}else console.error("Failed to fetch orders")}catch(e){console.error("Error fetching orders:",e)}finally{u(!1)}}},[e]),s)?r.jsx(c.Gu,{message:"Loading account...",className:"account-hero-bg"}):a?(0,r.jsxs)("div",{className:"App",children:[(0,r.jsxs)("div",{className:"account-hero-bg",children:[r.jsx(c.AI,{user:e,loading:s,onLogout:d}),r.jsx("section",{className:"account-hero",children:r.jsx("div",{className:"account-hero-container",children:(0,r.jsxs)("div",{className:"account-hero-content",children:[r.jsx("h1",{children:"\uD83D\uDC64 My Account"}),r.jsx("p",{children:"Manage your profile, orders, and preferences"}),(0,r.jsxs)("div",{className:"account-hero-stats",children:[(0,r.jsxs)("div",{className:"modern-stat",children:[r.jsx("span",{className:"modern-stat-number",children:o.length}),r.jsx("span",{className:"modern-stat-label",children:"Total Orders"})]}),(0,r.jsxs)("div",{className:"modern-stat",children:[r.jsx("span",{className:"modern-stat-number",children:o.filter(e=>"delivered"!==e.status).length}),r.jsx("span",{className:"modern-stat-label",children:"Active"})]}),(0,r.jsxs)("div",{className:"modern-stat",children:[r.jsx("span",{className:"modern-stat-number",children:"\uD83C\uDF93"}),r.jsx("span",{className:"modern-stat-label",children:"Student"})]})]})]})})})]}),r.jsx("main",{className:"account-main",children:(0,r.jsxs)("div",{className:"account-container-modern",children:[(0,r.jsxs)("div",{className:"account-section-modern",children:[(0,r.jsxs)("div",{className:"section-header-account",children:[r.jsx("h2",{children:"\uD83D\uDC64 Profile Information"}),r.jsx("p",{children:"Your personal details and contact information"})]}),(0,r.jsxs)("div",{className:"profile-card-modern",children:[(0,r.jsxs)("div",{className:"profile-avatar-modern",children:[r.jsx("div",{className:"avatar-icon",children:"\uD83D\uDC64"}),r.jsx("div",{className:"avatar-status",children:"Online"})]}),(0,r.jsxs)("div",{className:"profile-info-modern",children:[(0,r.jsxs)("h3",{children:[e.firstName," ",e.lastName]}),r.jsx("p",{className:"profile-email-modern",children:e.email}),r.jsx("span",{className:"profile-badge",children:"Campus Student"})]}),r.jsx("div",{className:"profile-actions",children:r.jsx("button",{className:"btn-edit-profile",children:"✏️ Edit"})})]}),r.jsx("div",{className:"account-details-modern",children:(0,r.jsxs)("div",{className:"details-grid",children:[(0,r.jsxs)("div",{className:"detail-card",children:[r.jsx("div",{className:"detail-icon",children:"\uD83D\uDC64"}),(0,r.jsxs)("div",{className:"detail-content",children:[r.jsx("span",{className:"detail-label",children:"Full Name"}),(0,r.jsxs)("span",{className:"detail-value",children:[e.firstName," ",e.lastName]})]})]}),(0,r.jsxs)("div",{className:"detail-card",children:[r.jsx("div",{className:"detail-icon",children:"\uD83D\uDCE7"}),(0,r.jsxs)("div",{className:"detail-content",children:[r.jsx("span",{className:"detail-label",children:"Email Address"}),r.jsx("span",{className:"detail-value",children:e.email})]})]}),(0,r.jsxs)("div",{className:"detail-card",children:[r.jsx("div",{className:"detail-icon",children:"\uD83D\uDCF1"}),(0,r.jsxs)("div",{className:"detail-content",children:[r.jsx("span",{className:"detail-label",children:"Phone Number"}),r.jsx("span",{className:"detail-value",children:e.phone||"Not provided"})]})]}),(0,r.jsxs)("div",{className:"detail-card",children:[r.jsx("div",{className:"detail-icon",children:"\uD83D\uDCC5"}),(0,r.jsxs)("div",{className:"detail-content",children:[r.jsx("span",{className:"detail-label",children:"Member Since"}),r.jsx("span",{className:"detail-value",children:"August 2025"})]})]})]})})]}),(0,r.jsxs)("div",{className:"account-section-modern",children:[(0,r.jsxs)("div",{className:"section-header-account",children:[r.jsx("h2",{children:"\uD83D\uDCE6 Current Order"}),r.jsx("p",{children:"Track your active order and delivery status"}),o.length>0&&"delivered"!==o[0].status&&r.jsx("span",{className:`order-status-modern ${o[0].status}`,children:o[0].status.replace("_"," ").toUpperCase()})]}),h?(0,r.jsxs)("div",{className:"loading-orders-modern",children:[r.jsx("div",{className:"loading-spinner",children:"⏳"}),r.jsx("p",{children:"Loading orders..."})]}):o.length>0&&"delivered"!==o[0].status?(0,r.jsxs)("div",{className:"current-order-modern",children:[(0,r.jsxs)("div",{className:"order-header-modern",children:[(0,r.jsxs)("div",{className:"order-info",children:[(0,r.jsxs)("h3",{children:["Order #",o[0].id]}),r.jsx("span",{className:"order-date",children:new Date(o[0].created_at).toLocaleDateString()})]}),r.jsx("div",{className:"order-actions-modern",children:r.jsx(l.default,{href:`/order-tracking?orderId=${o[0].id}`,className:"btn-track-order",children:"\uD83D\uDCCD Track Order"})})]}),r.jsx("div",{className:"order-summary-modern",children:(0,r.jsxs)("div",{className:"summary-cards",children:[(0,r.jsxs)("div",{className:"summary-card",children:[r.jsx("div",{className:"summary-icon",children:"\uD83D\uDCB0"}),(0,r.jsxs)("div",{className:"summary-details",children:[r.jsx("span",{className:"summary-label",children:"Total"}),(0,r.jsxs)("span",{className:"summary-value",children:["$",o[0].total.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"summary-card",children:[r.jsx("div",{className:"summary-icon",children:"\uD83D\uDCE6"}),(0,r.jsxs)("div",{className:"summary-details",children:[r.jsx("span",{className:"summary-label",children:"Status"}),r.jsx("span",{className:"summary-value",children:o[0].status.replace("_"," ")})]})]}),(0,r.jsxs)("div",{className:"summary-card",children:[r.jsx("div",{className:"summary-icon",children:"\uD83C\uDFE2"}),(0,r.jsxs)("div",{className:"summary-details",children:[r.jsx("span",{className:"summary-label",children:"Delivery"}),(0,r.jsxs)("span",{className:"summary-value",children:[o[0].delivery_details.building,", ",o[0].delivery_details.room]})]})]})]})}),(0,r.jsxs)("div",{className:"order-items",children:[r.jsx("h4",{children:"Order Items:"}),o[0].items.map((e,s)=>(0,r.jsxs)("div",{className:"order-item-detail",children:[(0,r.jsxs)("div",{className:"item-info",children:[r.jsx("span",{className:"item-name",children:e.name}),e.customizations&&r.jsx("div",{className:"item-customizations",children:Array.isArray(e.customizations)?r.jsx("span",{className:"customization-text",children:e.customizations.map(e=>({D134:"White Bread",D129:"Italian Bread",D133:"Flatbread",D131:"Wheat Bread",D854:"Multigrain Flatbread",D139:"American Cheese",D138:"Swiss Cheese",D136:"Cheddar Cheese",D518:"Ham",D317:"Steak",D171:"Pickles",D169:"Jalape\xf1os",D170:"Spinach",D163:"Tomatoes",D164:"Onions",D165:"Cucumbers",D166:"Green Peppers",D173:"Banana Peppers",D167:"Black Olives",D162:"Lettuce",D145:"Ranch",D147:"BBQ Sauce",D149:"Hot Sauce",D154:"Honey Mustard",D156:"Chipotle Southwest",D157:"Light Mayonnaise",D146:"Italian Dressing",D141:"Mayonnaise",D151:"Oil & Vinegar",D144:"Ketchup",D174:"Vinegar",D153:"Sweet Onion",D143:"Mustard",D668:"Sriracha",D1478:"Buffalo Sauce",D160:"Pepper",D159:"Salt",2575:"Double Meat",2594:"Extra Bread",2590:"Extra Toppings",3668:"Premium Sauces",2588:"Extra Sauce",2407:"Extra Cheese",2435:"Premium Toppings"})[e]||`Option ${e}`).join(", ")}):r.jsx("span",{className:"customization-text",children:Object.entries(e.customizations).map(([e,s])=>{if(!Array.isArray(s)||0===s.length)return null;let a=e.charAt(0).toUpperCase()+e.slice(1);return`${a}: ${s.join(", ")}`}).filter(Boolean).join(" | ")})})]}),(0,r.jsxs)("div",{className:"item-details",children:[(0,r.jsxs)("span",{className:"item-quantity",children:["x",e.quantity]}),(0,r.jsxs)("span",{className:"item-price",children:["$",(e.totalPrice||e.price*e.quantity).toFixed(2)]})]})]},s))]})]}):(0,r.jsxs)("div",{className:"order-placeholder-modern",children:[r.jsx("div",{className:"placeholder-icon",children:"\uD83D\uDCE6"}),r.jsx("h3",{children:"No Active Orders"}),r.jsx("p",{children:"You don't have any orders in progress right now."}),r.jsx(l.default,{href:"/restaurants",className:"btn-order-food",children:"\uD83C\uDF7D️ Order Food"})]})]}),(0,r.jsxs)("div",{className:"account-section-modern",children:[(0,r.jsxs)("div",{className:"section-header-account",children:[r.jsx("h2",{children:"\uD83D\uDCCB Order History"}),r.jsx("p",{children:"View your previous orders and reorder favorites"}),o.length>0&&(0,r.jsxs)("span",{className:"order-count-modern",children:[o.length," total orders"]})]}),h?(0,r.jsxs)("div",{className:"loading-orders",children:[r.jsx("div",{className:"loading-spinner",children:"⏳"}),r.jsx("p",{children:"Loading orders..."})]}):o.length>0?(0,r.jsxs)("div",{className:"previous-orders-modern",children:[o.slice(0,3).map(e=>(0,r.jsxs)("div",{className:"order-item",children:[(0,r.jsxs)("div",{className:"order-item-header",children:[(0,r.jsxs)("h4",{children:["Order #",e.id]}),r.jsx("span",{className:`order-status ${e.status}`,children:e.status.replace("_"," ").toUpperCase()})]}),(0,r.jsxs)("div",{className:"order-item-details",children:[(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Date:"})," ",new Date(e.created_at).toLocaleDateString()]}),(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Total:"})," $",e.total.toFixed(2)]}),(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Items:"})," ",e.items.length," item",1!==e.items.length?"s":""]}),(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Delivery:"})," ",e.delivery_details.building,", ",e.delivery_details.room]})]}),(0,r.jsxs)("div",{className:"order-items-preview",children:[r.jsx("h5",{children:"Order Contents:"}),(0,r.jsxs)("div",{className:"items-list",children:[e.items.slice(0,3).map((e,s)=>(0,r.jsxs)("div",{className:"item-preview",children:[(0,r.jsxs)("div",{className:"item-info",children:[r.jsx("span",{className:"item-name",children:e.name}),e.customizations&&r.jsx("div",{className:"item-customizations-preview",children:Array.isArray(e.customizations)?(0,r.jsxs)("span",{className:"customization-text-small",children:[e.customizations.slice(0,2).map(e=>({D134:"White Bread",D129:"Italian Bread",D133:"Flatbread",D131:"Wheat Bread",D854:"Multigrain Flatbread",D139:"American Cheese",D138:"Swiss Cheese",D136:"Cheddar Cheese",D518:"Ham",D317:"Steak",D171:"Pickles",D169:"Jalape\xf1os",D170:"Spinach",D163:"Tomatoes",D164:"Onions",D165:"Cucumbers",D166:"Green Peppers",D173:"Banana Peppers",D167:"Black Olives",D162:"Lettuce",D145:"Ranch",D147:"BBQ Sauce",D149:"Hot Sauce",D154:"Honey Mustard",D156:"Chipotle Southwest",D157:"Light Mayonnaise",D146:"Italian Dressing",D141:"Mayonnaise",D151:"Oil & Vinegar",D144:"Ketchup",D174:"Vinegar",D153:"Sweet Onion",D143:"Mustard",D668:"Sriracha",D1478:"Buffalo Sauce",D160:"Pepper",D159:"Salt",2575:"Double Meat",2594:"Extra Bread",2590:"Extra Toppings",3668:"Premium Sauces",2588:"Extra Sauce",2407:"Extra Cheese",2435:"Premium Toppings"})[e]||`Option ${e}`).join(", "),e.customizations.length>2&&` +${e.customizations.length-2} more`]}):r.jsx("span",{className:"customization-text-small",children:Object.entries(e.customizations).slice(0,1).map(([e,s])=>{if(!Array.isArray(s)||0===s.length)return null;let a=e.charAt(0).toUpperCase()+e.slice(1);return`${a}: ${s.slice(0,2).join(", ")}`}).filter(Boolean).join(" | ")})})]}),(0,r.jsxs)("span",{className:"item-quantity",children:["x",e.quantity]})]},s)),e.items.length>3&&(0,r.jsxs)("div",{className:"more-items",children:["+",e.items.length-3," more items"]})]})]}),r.jsx("div",{className:"order-item-actions",children:"delivered"!==e.status?r.jsx(l.default,{href:`/order-tracking?orderId=${e.id}`,className:"btn btn-sm btn-primary",children:"Track"}):r.jsx(l.default,{href:`/order-tracking?orderId=${e.id}`,className:"btn btn-sm btn-secondary",children:"View"})})]},e.id)),o.length>3&&r.jsx("div",{className:"view-more-orders",children:(0,r.jsxs)(l.default,{href:"/orders",className:"btn btn-outline",children:["View All ",o.length," Orders"]})})]}):(0,r.jsxs)("div",{className:"orders-placeholder",children:[r.jsx("div",{className:"placeholder-icon",children:"\uD83D\uDCCB"}),r.jsx("h3",{children:"No Previous Orders"}),r.jsx("p",{children:"Your order history will appear here once you start ordering."}),r.jsx(l.default,{href:"/restaurants",className:"btn btn-primary",children:"Start Ordering"})]})]}),(0,r.jsxs)("div",{className:"account-section-modern",children:[(0,r.jsxs)("div",{className:"section-header-account",children:[r.jsx("h2",{children:"⚡ Quick Actions"}),r.jsx("p",{children:"Fast access to your most used features"})]}),(0,r.jsxs)("div",{className:"quick-actions-modern",children:[(0,r.jsxs)(l.default,{href:"/restaurants",className:"action-card-modern",children:[r.jsx("div",{className:"action-icon-modern",children:"\uD83C\uDF55"}),(0,r.jsxs)("div",{className:"action-content",children:[r.jsx("h3",{children:"Order Food"}),r.jsx("p",{children:"Browse restaurants and place a new order"})]}),r.jsx("div",{className:"action-arrow",children:"→"})]}),(0,r.jsxs)(l.default,{href:"/cart",className:"action-card-modern",children:[r.jsx("div",{className:"action-icon-modern",children:"\uD83D\uDED2"}),(0,r.jsxs)("div",{className:"action-content",children:[r.jsx("h3",{children:"View Cart"}),r.jsx("p",{children:"Check your current cart and proceed to checkout"})]}),r.jsx("div",{className:"action-arrow",children:"→"})]}),(0,r.jsxs)("button",{className:"action-card-modern",children:[r.jsx("div",{className:"action-icon-modern",children:"⚙️"}),(0,r.jsxs)("div",{className:"action-content",children:[r.jsx("h3",{children:"Account Settings"}),r.jsx("p",{children:"Update your profile and preferences"})]}),r.jsx("div",{className:"action-arrow",children:"→"})]}),(0,r.jsxs)("button",{className:"action-card-modern",children:[r.jsx("div",{className:"action-icon-modern",children:"\uD83D\uDD12"}),(0,r.jsxs)("div",{className:"action-content",children:[r.jsx("h3",{children:"Security"}),r.jsx("p",{children:"Change password and manage security settings"})]}),r.jsx("div",{className:"action-arrow",children:"→"})]})]})]})]})})]}):null}},8056:(e,s,a)=>{"use strict";a.d(s,{AI:()=>i,Gu:()=>l,Te:()=>c,ZG:()=>t});var r=a(326),n=a(434);function i({user:e,loading:s,onLogout:a}){return r.jsx("header",{className:"modern-header",children:(0,r.jsxs)("nav",{className:"modern-nav",children:[r.jsx(n.default,{href:"/",className:"modern-logo",children:"Campus Angel"}),(0,r.jsxs)("ul",{className:"modern-nav-links",children:[r.jsx("li",{children:r.jsx(n.default,{href:"/",children:"Home"})}),r.jsx("li",{children:r.jsx(n.default,{href:"/restaurants",children:"Restaurants"})}),r.jsx("li",{children:r.jsx(n.default,{href:"/account",children:"Account"})}),r.jsx("li",{children:r.jsx(n.default,{href:"/cart",children:"Cart"})})]}),r.jsx("div",{className:"modern-auth-buttons",children:s?r.jsx("div",{className:"auth-loading",children:"⏳"}):e?(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.default,{href:"/account",className:"btn btn-outline-modern",children:"My Account"}),r.jsx(n.default,{href:"/cart",className:"btn btn-primary-modern",children:"Cart"}),r.jsx("button",{onClick:a,className:"btn btn-secondary-modern",children:"Logout"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.default,{href:"/login",className:"btn btn-outline-modern",children:"Log In"}),r.jsx(n.default,{href:"/register",className:"btn btn-primary-modern",children:"Sign Up"})]})})]})})}function l({message:e="Loading...",submessage:s,className:a="hero-bg"}){return r.jsx("div",{className:"App",children:(0,r.jsxs)("div",{className:a,children:[r.jsx(i,{}),r.jsx("main",{className:"loading-main",children:r.jsx("div",{className:"loading-container-modern",children:(0,r.jsxs)("div",{className:"loading-content",children:[r.jsx("div",{className:"loading-spinner",children:"⏳"}),r.jsx("h2",{children:e}),s&&r.jsx("p",{children:s})]})})})]})})}function t({message:e="Authentication Required",submessage:s="You must be logged in to access this page.",className:a="hero-bg"}){return r.jsx("div",{className:"App",children:(0,r.jsxs)("div",{className:a,children:[r.jsx(i,{}),r.jsx("main",{className:"auth-required-main",children:r.jsx("div",{className:"auth-required-container-modern",children:(0,r.jsxs)("div",{className:"auth-required-content",children:[r.jsx("div",{className:"auth-icon",children:"\uD83D\uDD12"}),r.jsx("h2",{children:e}),r.jsx("p",{children:s}),(0,r.jsxs)("div",{className:"auth-actions-modern",children:[r.jsx(n.default,{href:"/login",className:"btn-auth-primary",children:"\uD83D\uDD11 Login"}),r.jsx(n.default,{href:"/register",className:"btn-auth-secondary",children:"\uD83D\uDCDD Register"})]})]})})})]})})}function c({title:e="Something went wrong",message:s,primaryAction:a,secondaryAction:l,className:t="hero-bg"}){return r.jsx("div",{className:"App",children:(0,r.jsxs)("div",{className:t,children:[r.jsx(i,{}),r.jsx("main",{className:"error-main",children:r.jsx("div",{className:"error-container-modern",children:(0,r.jsxs)("div",{className:"error-content",children:[r.jsx("div",{className:"error-icon",children:"❌"}),r.jsx("h2",{children:e}),r.jsx("p",{children:s}),(0,r.jsxs)("div",{className:"error-actions",children:[a&&(0,r.jsxs)(n.default,{href:a.href,className:"btn-error-primary",children:[a.icon," ",a.text]}),l&&(0,r.jsxs)(n.default,{href:l.href,className:"btn-error-secondary",children:[l.icon," ",l.text]})]})]})})})]})})}},4131:(e,s,a)=>{"use strict";a.d(s,{a:()=>i});var r=a(7577),n=a(5047);function i(e={}){let{requireAuth:s=!1,redirectToLogin:a=!1}=e,i=(0,n.useRouter)(),[l,t]=(0,r.useState)({user:null,loading:!0,error:null}),c=(0,r.useCallback)(async()=>{try{let e=localStorage.getItem("accessToken");if(!e){t({user:null,loading:!1,error:null}),s&&a&&i.push("/login");return}let r=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(r.ok){let e=await r.json();t({user:e.user,loading:!1,error:null})}else if(401===r.status){let e=localStorage.getItem("refreshToken");if(e)try{let s=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(s.ok){let e=await s.json();localStorage.setItem("accessToken",e.session.accessToken),localStorage.setItem("refreshToken",e.session.refreshToken);let a=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e.session.accessToken}`,"Content-Type":"application/json"}});if(a.ok){let e=await a.json();t({user:e.user,loading:!1,error:null})}else d()}else d()}catch(e){console.error("Token refresh error:",e),d()}else d()}else d()}catch(e){console.error("Auth check error:",e),t({user:null,loading:!1,error:"Failed to check authentication"}),s&&a&&i.push("/login")}},[s,a,i]),d=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),t({user:null,loading:!1,error:null}),s&&a&&i.push("/login")};return{user:l.user,loading:l.loading,error:l.error,isAuthenticated:!!l.user,logout:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),t({user:null,loading:!1,error:null}),i.push("/")},refreshAuth:()=>{t(e=>({...e,loading:!0})),c()}}}},6147:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`C:\Users\Bevan\uni-food-delivery\src\app\account\page.tsx#default`)},2029:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t,metadata:()=>l});var r=a(9510),n=a(5384),i=a.n(n);a(1141);let l={title:"Campus Angel - University Food Delivery",description:"Your campus food angel is here! Order delicious food from campus restaurants with fast delivery."};function t({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:e})})}},1141:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[276,349,496],()=>a(833));module.exports=r})();