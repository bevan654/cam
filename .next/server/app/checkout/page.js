(()=>{var e={};e.id=285,e.ids=[285],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8458:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>u,routeModule:()=>h,tree:()=>l}),t(1324),t(2029),t(5866);var n=t(3191),s=t(8716),a=t(7922),o=t.n(a),i=t(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(r,c);let l=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1324)),"C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\checkout\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\Bevan\\uni-food-delivery\\src\\app\\checkout\\page.tsx"],d="/checkout/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},2620:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},8094:()=>{},9992:(e,r,t)=>{Promise.resolve().then(t.bind(t,9624))},9899:(e,r,t)=>{"use strict";var n=t(6715);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,r,t,s,a,o){if(o!==n){var i=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function r(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:a,resetWarningCache:s};return t.PropTypes=t,t}},8439:(e,r,t)=>{e.exports=t(9899)()},6715:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9624:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>V});var n,s=t(326),a=t(7577),o=t(5047),i=t(8439);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach(function(r){d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function m(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t,n,s=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=s){var a=[],o=!0,i=!1;try{for(s=s.call(e);!(o=(t=s.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(e){i=!0,n=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw n}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return h(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,r)}}(e,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var p=function(e,r,t){var n=!!t,s=a.useRef(t);a.useEffect(function(){s.current=t},[t]),a.useEffect(function(){if(!n||!e)return function(){};var t=function(){s.current&&s.current.apply(s,arguments)};return e.on(r,t),function(){e.off(r,t)}},[n,r,e,s])},f=function(e){var r=a.useRef(e);return a.useEffect(function(){r.current=e},[e]),r.current},y=function(e){return null!==e&&"object"===u(e)},x="[object Object]",j=function e(r,t){if(!y(r)||!y(t))return r===t;var n=Array.isArray(r);if(n!==Array.isArray(t))return!1;var s=Object.prototype.toString.call(r)===x;if(s!==(Object.prototype.toString.call(t)===x))return!1;if(!s&&!n)return r===t;var a=Object.keys(r),o=Object.keys(t);if(a.length!==o.length)return!1;for(var i={},c=0;c<a.length;c+=1)i[a[c]]=!0;for(var l=0;l<o.length;l+=1)i[o[l]]=!0;var u=Object.keys(i);return u.length===a.length&&u.every(function(n){return e(r[n],t[n])})},v=function(e,r,t){return y(e)?Object.keys(e).reduce(function(n,s){var a=!y(r)||!j(e[s],r[s]);return t.includes(s)?(a&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),n):a?l(l({},n||{}),{},d({},s,e[s])):n},null):null},g="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",D=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;if(null===e||y(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment)return e;throw Error(r)},b=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;if(y(e)&&"function"==typeof e.then)return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return D(e,r)})};var t=D(e,r);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},N=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},C=a.createContext(null);C.displayName="ElementsContext";var k=function(e,r){if(!e)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return e},S=function(e){var r=e.stripe,t=e.options,n=e.children,s=a.useMemo(function(){return b(r)},[r]),o=m(a.useState(function(){return{stripe:"sync"===s.tag?s.stripe:null,elements:"sync"===s.tag?s.stripe.elements(t):null}}),2),i=o[0],c=o[1];a.useEffect(function(){var e=!0,r=function(e){c(function(r){return r.stripe?r:{stripe:e,elements:e.elements(t)}})};return"async"!==s.tag||i.stripe?"sync"!==s.tag||i.stripe||r(s.stripe):s.stripePromise.then(function(t){t&&e&&r(t)}),function(){e=!1}},[s,i,t]);var l=f(r);a.useEffect(function(){null!==l&&l!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[l,r]);var u=f(t);return a.useEffect(function(){if(i.elements){var e=v(t,u,["clientSecret","fonts"]);e&&i.elements.update(e)}},[t,u,i.elements]),a.useEffect(function(){N(i.stripe)},[i.stripe]),a.createElement(C.Provider,{value:i},n)};S.propTypes={stripe:i.any,options:i.object},i.func.isRequired;var w=a.createContext(null);w.displayName="CustomCheckoutSdkContext";var P=function(e,r){if(!e)throw Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(r," in an <CustomCheckoutProvider> provider."));return e};a.createContext(null).displayName="CustomCheckoutContext",i.any,i.shape({clientSecret:i.string.isRequired,elementsOptions:i.object}).isRequired;var E=function(e){var r=a.useContext(w),t=a.useContext(C);if(r&&t)throw Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return r?P(r,e):k(t,e)},O=function(e,r){var t="".concat(e.charAt(0).toUpperCase()+e.slice(1),"Element"),n=r?function(e){E("mounts <".concat(t,">"));var r=e.id,n=e.className;return a.createElement("div",{id:r,className:n})}:function(r){var n,s=r.id,o=r.className,i=r.options,c=void 0===i?{}:i,l=r.onBlur,u=r.onFocus,d=r.onReady,h=r.onChange,y=r.onEscape,x=r.onClick,j=r.onLoadError,g=r.onLoaderStart,D=r.onNetworksChange,b=r.onConfirm,N=r.onCancel,C=r.onShippingAddressChange,k=r.onShippingRateChange,S=E("mounts <".concat(t,">")),w="elements"in S?S.elements:null,P="customCheckoutSdk"in S?S.customCheckoutSdk:null,O=m(a.useState(null),2),A=O[0],T=O[1],I=a.useRef(null),F=a.useRef(null);p(A,"blur",l),p(A,"focus",u),p(A,"escape",y),p(A,"click",x),p(A,"loaderror",j),p(A,"loaderstart",g),p(A,"networkschange",D),p(A,"confirm",b),p(A,"cancel",N),p(A,"shippingaddresschange",C),p(A,"shippingratechange",k),p(A,"change",h),d&&(n="expressCheckout"===e?d:function(){d(A)}),p(A,"ready",n),a.useLayoutEffect(function(){if(null===I.current&&null!==F.current&&(w||P)){var r=null;P?r=P.createElement(e,c):w&&(r=w.create(e,c)),I.current=r,T(r),r&&r.mount(F.current)}},[w,P,c]);var B=f(c);return a.useEffect(function(){if(I.current){var e=v(c,B,["paymentRequest"]);e&&"update"in I.current&&I.current.update(e)}},[c,B]),a.useLayoutEffect(function(){return function(){if(I.current&&"function"==typeof I.current.destroy)try{I.current.destroy(),I.current=null}catch(e){}}},[]),a.createElement("div",{id:s,className:o,ref:F})};return n.propTypes={id:i.string,className:i.string,onChange:i.func,onBlur:i.func,onFocus:i.func,onReady:i.func,onEscape:i.func,onClick:i.func,onLoadError:i.func,onLoaderStart:i.func,onNetworksChange:i.func,onConfirm:i.func,onCancel:i.func,onShippingAddressChange:i.func,onShippingRateChange:i.func,options:i.object},n.displayName=t,n.__elementType=e,n},A="undefined"==typeof window;a.createContext(null).displayName="EmbeddedCheckoutProviderContext",O("auBankAccount",A);var T=O("card",A);O("cardNumber",A),O("cardExpiry",A),O("cardCvc",A),O("fpxBank",A),O("iban",A),O("idealBank",A),O("p24Bank",A),O("epsBank",A),O("payment",A),O("expressCheckout",A),O("currencySelector",A),O("paymentRequestButton",A),O("linkAuthentication",A),O("address",A),O("shippingAddress",A),O("paymentMethodMessaging",A),O("affirmMessage",A),O("afterpayClearpayMessage",A);var I="https://js.stripe.com/v3",F=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,B=function(){for(var e=document.querySelectorAll('script[src^="'.concat(I,'"]')),r=0;r<e.length;r++){var t=e[r];if(F.test(t.src))return t}return null},q=function(e){var r=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",t=document.createElement("script");t.src="".concat(I).concat(r);var n=document.head||document.body;if(!n)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t},_=function(e,r){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:r})},R=null,L=null,M=null,W=function(e,r,t){if(null===e)return null;var n=e.apply(void 0,r);return _(n,t),n},$=!1,U=function(){return n||(n=(null!==R?R:(R=new Promise(function(e,r){if("undefined"==typeof window||"undefined"==typeof document){e(null);return}if(window.Stripe,window.Stripe){e(window.Stripe);return}try{var t,n=B();n?n&&null!==M&&null!==L&&(n.removeEventListener("load",M),n.removeEventListener("error",L),null===(t=n.parentNode)||void 0===t||t.removeChild(n),n=q(null)):n=q(null),M=function(){window.Stripe?e(window.Stripe):r(Error("Stripe.js not available"))},L=function(){r(Error("Failed to load Stripe.js"))},n.addEventListener("load",M),n.addEventListener("error",L)}catch(e){r(e);return}})).catch(function(e){return R=null,Promise.reject(e)})).catch(function(e){return n=null,Promise.reject(e)}))};Promise.resolve().then(function(){return U()}).catch(function(e){$||console.warn(e)});var Y=t(4131),G=t(8056);!function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];$=!0;var n=Date.now();U().then(function(e){return W(e,r,n)})}("pk_test_51RvFxXPhAQtRWVqnklj6a00qrHrmYQWVEt6fgBwdte0bJHOkWQHs7o3lWIuYGZF3WqFMEkT0ZSIUc7pIlW63OxLz00fneok36u");let z={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"},backgroundColor:"transparent"},invalid:{color:"#9e2146"}}};function H({amount:e,onCardError:r,onPaymentMethodReady:t}){var n;E("calls useStripe()").stripe,(n="calls useElements()",k(a.useContext(C),n)).elements;let[o,i]=(0,a.useState)(""),[c,l]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"stripe-payment-form",children:[(0,s.jsxs)("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"card-element",children:"Credit or Debit Card"}),s.jsx("div",{className:"card-element-container",children:s.jsx(T,{id:"card-element",options:z,onChange:e=>{e.error?i(e.error.message):i("")},className:"card-element"})}),o&&s.jsx("span",{className:"error-text",children:o})]}),s.jsx("div",{className:"payment-summary",children:(0,s.jsxs)("div",{className:"amount-display",children:[s.jsx("span",{children:"Total Amount:"}),(0,s.jsxs)("span",{className:"total-amount",children:["$",e.toFixed(2)]})]})}),(0,s.jsxs)("div",{className:"payment-security",children:[(0,s.jsxs)("div",{className:"security-badges",children:[s.jsx("span",{className:"security-badge",children:"\uD83D\uDD12"}),s.jsx("span",{className:"security-badge",children:"SSL"}),s.jsx("span",{className:"security-badge",children:"PCI"})]}),s.jsx("p",{className:"security-text",children:"Your payment information is secure and encrypted"})]})]})}function V(){let e=(0,o.useRouter)(),{user:r,loading:t,isAuthenticated:n,logout:i}=(0,Y.a)({requireAuth:!0,redirectToLogin:!1}),[c,l]=(0,a.useState)(null),[u,d]=(0,a.useState)(!1),[m,h]=(0,a.useState)({deliveryDetails:{building:"",room:"",instructions:""},contactInfo:{name:"",phone:"",email:""},paymentMethod:"card"}),[p,f]=(0,a.useState)(!1),[y,x]=(0,a.useState)(!0),[j,v]=(0,a.useState)(""),[g,D]=(0,a.useState)(null),[b,N]=(0,a.useState)([]),C={D134:"White Bread",D129:"Italian Bread",D133:"Flatbread",D131:"Wheat Bread",D854:"Multigrain Flatbread",D139:"American Cheese",D138:"Swiss Cheese",D136:"Cheddar Cheese",D518:"Ham",D317:"Steak",D171:"Pickles",D169:"Jalape\xf1os",D170:"Spinach",D163:"Tomatoes",D164:"Onions",D165:"Cucumbers",D166:"Green Peppers",D173:"Banana Peppers",D167:"Black Olives",D162:"Lettuce",D145:"Ranch",D147:"BBQ Sauce",D149:"Hot Sauce",D154:"Honey Mustard",D156:"Chipotle Southwest",D157:"Light Mayonnaise",D146:"Italian Dressing",D141:"Mayonnaise",D151:"Oil & Vinegar",D144:"Ketchup",D174:"Vinegar",D153:"Sweet Onion",D143:"Mustard",D668:"Sriracha",D1478:"Buffalo Sauce",D160:"Pepper",D159:"Salt",2575:"Double Meat",2594:"Extra Bread",2590:"Extra Toppings",3668:"Premium Sauces",2588:"Extra Sauce",2407:"Extra Cheese",2435:"Premium Toppings"},k=e=>{if(Array.isArray(e)){if(0===e.length)return"No customizations";let r={};return e.forEach(e=>{let t=C[e]||`Option ${e}`,n="Other";e.startsWith("D1")&&["D134","D129","D133","D131","D854"].includes(e)?n="Bread":e.startsWith("D1")&&["D139","D138","D136"].includes(e)?n="Cheese":e.startsWith("D5")||"D317"===e?n="Protein":e.startsWith("D1")&&["D171","D169","D170","D163","D164","D165","D166","D173","D167","D162"].includes(e)?n="Vegetables":e.startsWith("D1")&&["D145","D147","D149","D154","D156","D157","D146","D141","D151","D144","D174","D153","D143","D668","D1478"].includes(e)?n="Sauces":["D160","D159"].includes(e)?n="Seasonings":["2575","2594","2590","3668","2588","2407","2435"].includes(e)&&(n="Extras"),r[n]||(r[n]=[]),r[n].push(t)}),Object.entries(r).map(([e,r])=>`${e}: ${r.join(", ")}`).join(" | ")}return e&&0!==Object.keys(e).length?Object.entries(e).map(([e,r])=>{if(!Array.isArray(r)||0===r.length)return null;let t=e.charAt(0).toUpperCase()+e.slice(1);return`${t}: ${r.join(", ")}`}).filter(Boolean).join(" | "):"No customizations"},w=b.reduce((e,r)=>e+(r.totalPrice||r.price*r.quantity),0),P=b.length>0?2.99:0,E=w+P,O=(e,r,t)=>{h(n=>({...n,[e]:{...n[e],[r]:t}}))},A=async r=>{if(r.preventDefault(),j){alert("Please fix the card errors before proceeding.");return}if(!g){alert("Please wait for the payment form to load.");return}f(!0),d(!0);try{let r=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:b,total:E})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to create payment intent")}let{clientSecret:t,paymentIntentId:n}=await r.json();if(!c)throw Error("Stripe not initialized");let s=await g.createPaymentMethod(),a=await c,{error:o,paymentIntent:i}=await a.confirmCardPayment(t,{payment_method:s.id});if(o)throw Error(o.message);if("succeeded"!==i.status)throw Error("Payment failed");let l=await fetch("/api/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({paymentIntentId:n,items:b,total:E,deliveryDetails:m.deliveryDetails,contactInfo:m.contactInfo,paymentMethod:"card"})});if(!l.ok){let e=await l.json();throw Error(e.error||"Failed to create order")}let u=await l.json();localStorage.removeItem("campus-angel-cart");let d=u.order?.id;d?e.push(`/order-tracking?orderId=${d}`):(console.error("No order ID returned from API:",u),alert("Order created but could not redirect. Please check your orders."),e.push("/account"))}catch(r){console.error("Error processing payment:",r);let e=r instanceof Error?r.message:"An unknown error occurred";alert(`Payment failed: ${e}`)}finally{f(!1),d(!1)}};return t?s.jsx(G.Gu,{message:"Checking authentication...",className:"checkout-hero-bg"}):n?y?s.jsx(G.Gu,{message:"Loading checkout...",className:"checkout-hero-bg"}):0===b.length?s.jsx(G.Gu,{message:"Redirecting to cart...",className:"checkout-hero-bg"}):(0,s.jsxs)("div",{className:"App",children:[(0,s.jsxs)("div",{className:"checkout-hero-bg",children:[s.jsx(G.AI,{user:r,loading:t,onLogout:i}),s.jsx("section",{className:"checkout-hero",children:s.jsx("div",{className:"checkout-hero-container",children:(0,s.jsxs)("div",{className:"checkout-hero-content",children:[s.jsx("h1",{children:"\uD83D\uDED2 Secure Checkout"}),s.jsx("p",{children:"Complete your order with our secure payment system"}),(0,s.jsxs)("div",{className:"checkout-hero-stats",children:[(0,s.jsxs)("div",{className:"modern-stat",children:[s.jsx("span",{className:"modern-stat-number",children:b.length}),s.jsx("span",{className:"modern-stat-label",children:"Items"})]}),(0,s.jsxs)("div",{className:"modern-stat",children:[(0,s.jsxs)("span",{className:"modern-stat-number",children:["$",E.toFixed(0)]}),s.jsx("span",{className:"modern-stat-label",children:"Total"})]}),(0,s.jsxs)("div",{className:"modern-stat",children:[s.jsx("span",{className:"modern-stat-number",children:"\uD83D\uDD12"}),s.jsx("span",{className:"modern-stat-label",children:"Secure"})]})]})]})})})]}),s.jsx("main",{className:"checkout-main",children:s.jsx("div",{className:"checkout-container-modern",children:(0,s.jsxs)("div",{className:"checkout-layout-modern",children:[s.jsx("div",{className:"checkout-form-modern",children:(0,s.jsxs)("form",{onSubmit:A,children:[(0,s.jsxs)("section",{className:"form-section-modern",children:[(0,s.jsxs)("div",{className:"section-header-modern",children:[s.jsx("h2",{children:"\uD83D\uDCCD Delivery Details"}),s.jsx("p",{children:"Where should we deliver your order?"})]}),(0,s.jsxs)("div",{className:"form-grid",children:[(0,s.jsxs)("div",{className:"form-group-modern",children:[s.jsx("label",{htmlFor:"building",children:"Building *"}),(0,s.jsxs)("div",{className:"input-wrapper-modern",children:[s.jsx("span",{className:"input-icon",children:"\uD83C\uDFE2"}),s.jsx("input",{type:"text",id:"building",className:"form-input-modern",value:m.deliveryDetails.building,onChange:e=>O("deliveryDetails","building",e.target.value),required:!0,placeholder:"e.g., Student Center"})]})]}),(0,s.jsxs)("div",{className:"form-group-modern",children:[s.jsx("label",{htmlFor:"room",children:"Room/Area *"}),(0,s.jsxs)("div",{className:"input-wrapper-modern",children:[s.jsx("span",{className:"input-icon",children:"\uD83D\uDEAA"}),s.jsx("input",{type:"text",id:"room",className:"form-input-modern",value:m.deliveryDetails.room,onChange:e=>O("deliveryDetails","room",e.target.value),required:!0,placeholder:"e.g., Room 101, Library"})]})]})]}),(0,s.jsxs)("div",{className:"form-group-modern",children:[s.jsx("label",{htmlFor:"instructions",children:"Delivery Instructions"}),(0,s.jsxs)("div",{className:"input-wrapper-modern",children:[s.jsx("span",{className:"input-icon",children:"\uD83D\uDCDD"}),s.jsx("textarea",{id:"instructions",className:"form-input-modern",value:m.deliveryDetails.instructions,onChange:e=>O("deliveryDetails","instructions",e.target.value),placeholder:"Any special instructions for delivery...",rows:3})]})]})]}),(0,s.jsxs)("section",{className:"form-section-modern",children:[(0,s.jsxs)("div",{className:"section-header-modern",children:[s.jsx("h2",{children:"\uD83D\uDCDE Contact Information"}),s.jsx("p",{children:"How can we reach you for delivery updates?"})]}),(0,s.jsxs)("div",{className:"form-group-modern",children:[s.jsx("label",{htmlFor:"name",children:"Full Name *"}),(0,s.jsxs)("div",{className:"input-wrapper-modern",children:[s.jsx("span",{className:"input-icon",children:"\uD83D\uDC64"}),s.jsx("input",{type:"text",id:"name",className:"form-input-modern",value:m.contactInfo.name,onChange:e=>O("contactInfo","name",e.target.value),required:!0,placeholder:"Your full name"})]})]}),(0,s.jsxs)("div",{className:"form-grid",children:[(0,s.jsxs)("div",{className:"form-group-modern",children:[s.jsx("label",{htmlFor:"phone",children:"Phone Number *"}),(0,s.jsxs)("div",{className:"input-wrapper-modern",children:[s.jsx("span",{className:"input-icon",children:"\uD83D\uDCF1"}),s.jsx("input",{type:"tel",id:"phone",className:"form-input-modern",value:m.contactInfo.phone,onChange:e=>O("contactInfo","phone",e.target.value),required:!0,placeholder:"+1234567890"})]})]}),(0,s.jsxs)("div",{className:"form-group-modern",children:[s.jsx("label",{htmlFor:"email",children:"Email *"}),(0,s.jsxs)("div",{className:"input-wrapper-modern",children:[s.jsx("span",{className:"input-icon",children:"\uD83D\uDCE7"}),s.jsx("input",{type:"email",id:"email",className:"form-input-modern",value:m.contactInfo.email,onChange:e=>O("contactInfo","email",e.target.value),required:!0,placeholder:"your.email@university.edu"})]})]})]})]}),(0,s.jsxs)("section",{className:"form-section-modern",children:[(0,s.jsxs)("div",{className:"section-header-modern",children:[s.jsx("h2",{children:"\uD83D\uDCB3 Payment Method"}),s.jsx("p",{children:"Secure payment powered by Stripe"})]}),(0,s.jsxs)("div",{className:"payment-info-modern",children:[s.jsx("div",{className:"payment-icon-modern",children:"\uD83D\uDCB3"}),(0,s.jsxs)("div",{className:"payment-text",children:[s.jsx("h4",{children:"Credit/Debit Card"}),s.jsx("p",{children:"Your payment information is secure and encrypted"})]}),(0,s.jsxs)("div",{className:"payment-badges",children:[s.jsx("span",{className:"badge",children:"\uD83D\uDCB3 Visa"}),s.jsx("span",{className:"badge",children:"\uD83D\uDCB3 MC"}),s.jsx("span",{className:"badge",children:"\uD83D\uDD12 SSL"})]})]}),c&&s.jsx("div",{className:"stripe-section-modern",children:s.jsx(S,{stripe:c,children:s.jsx(H,{amount:E,onCardError:v,onPaymentMethodReady:D})})})]}),s.jsx("button",{type:"submit",className:"btn-place-order",disabled:p||u||!!j||!g,children:u?"â³ Processing Payment...":p?"\uD83D\uDCE6 Processing Order...":`ðŸ›’ Place Order - $${E.toFixed(2)}`})]})}),(0,s.jsxs)("div",{className:"order-summary-checkout",children:[(0,s.jsxs)("div",{className:"summary-header-checkout",children:[s.jsx("h2",{children:"Order Summary"}),s.jsx("div",{className:"summary-icon",children:"\uD83D\uDCCB"})]}),s.jsx("div",{className:"order-items-checkout",children:b.map((e,r)=>{let t=k(e.customizations);return(0,s.jsxs)("div",{className:"order-item-checkout",children:[(0,s.jsxs)("div",{className:"item-info-checkout",children:[s.jsx("h4",{children:e.name}),s.jsx("p",{className:"customizations-checkout",children:t}),(0,s.jsxs)("p",{className:"quantity-checkout",children:["Qty: ",e.quantity]})]}),(0,s.jsxs)("div",{className:"item-price-checkout",children:["$",(e.totalPrice||e.price*e.quantity).toFixed(2)]})]},r)})}),(0,s.jsxs)("div",{className:"order-totals-checkout",children:[(0,s.jsxs)("div",{className:"total-line-checkout",children:[s.jsx("span",{children:"Subtotal:"}),(0,s.jsxs)("span",{children:["$",w.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"total-line-checkout",children:[s.jsx("span",{children:"Delivery Fee:"}),(0,s.jsxs)("span",{children:["$",P.toFixed(2)]})]}),s.jsx("div",{className:"summary-divider"}),(0,s.jsxs)("div",{className:"total-line-checkout total",children:[s.jsx("span",{children:"Total:"}),(0,s.jsxs)("span",{children:["$",E.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"delivery-info-checkout",children:[s.jsx("h4",{children:"\uD83D\uDE9A Delivery Details"}),(0,s.jsxs)("div",{className:"delivery-details",children:[s.jsx("p",{children:"\uD83D\uDD52 20-30 minutes"}),s.jsx("p",{children:"\uD83D\uDCCD Campus delivery only"}),s.jsx("p",{children:"\uD83D\uDD14 SMS updates included"})]})]})]})]})})})]}):s.jsx(G.ZG,{message:"Authentication Required",submessage:"You must be logged in to access the checkout page.",className:"checkout-hero-bg"})}},8056:(e,r,t)=>{"use strict";t.d(r,{AI:()=>a,Gu:()=>o,Te:()=>c,ZG:()=>i});var n=t(326),s=t(434);function a({user:e,loading:r,onLogout:t}){return n.jsx("header",{className:"modern-header",children:(0,n.jsxs)("nav",{className:"modern-nav",children:[n.jsx(s.default,{href:"/",className:"modern-logo",children:"Campus Angel"}),(0,n.jsxs)("ul",{className:"modern-nav-links",children:[n.jsx("li",{children:n.jsx(s.default,{href:"/",children:"Home"})}),n.jsx("li",{children:n.jsx(s.default,{href:"/restaurants",children:"Restaurants"})}),n.jsx("li",{children:n.jsx(s.default,{href:"/account",children:"Account"})}),n.jsx("li",{children:n.jsx(s.default,{href:"/cart",children:"Cart"})})]}),n.jsx("div",{className:"modern-auth-buttons",children:r?n.jsx("div",{className:"auth-loading",children:"â³"}):e?(0,n.jsxs)(n.Fragment,{children:[n.jsx(s.default,{href:"/account",className:"btn btn-outline-modern",children:"My Account"}),n.jsx(s.default,{href:"/cart",className:"btn btn-primary-modern",children:"Cart"}),n.jsx("button",{onClick:t,className:"btn btn-secondary-modern",children:"Logout"})]}):(0,n.jsxs)(n.Fragment,{children:[n.jsx(s.default,{href:"/login",className:"btn btn-outline-modern",children:"Log In"}),n.jsx(s.default,{href:"/register",className:"btn btn-primary-modern",children:"Sign Up"})]})})]})})}function o({message:e="Loading...",submessage:r,className:t="hero-bg"}){return n.jsx("div",{className:"App",children:(0,n.jsxs)("div",{className:t,children:[n.jsx(a,{}),n.jsx("main",{className:"loading-main",children:n.jsx("div",{className:"loading-container-modern",children:(0,n.jsxs)("div",{className:"loading-content",children:[n.jsx("div",{className:"loading-spinner",children:"â³"}),n.jsx("h2",{children:e}),r&&n.jsx("p",{children:r})]})})})]})})}function i({message:e="Authentication Required",submessage:r="You must be logged in to access this page.",className:t="hero-bg"}){return n.jsx("div",{className:"App",children:(0,n.jsxs)("div",{className:t,children:[n.jsx(a,{}),n.jsx("main",{className:"auth-required-main",children:n.jsx("div",{className:"auth-required-container-modern",children:(0,n.jsxs)("div",{className:"auth-required-content",children:[n.jsx("div",{className:"auth-icon",children:"\uD83D\uDD12"}),n.jsx("h2",{children:e}),n.jsx("p",{children:r}),(0,n.jsxs)("div",{className:"auth-actions-modern",children:[n.jsx(s.default,{href:"/login",className:"btn-auth-primary",children:"\uD83D\uDD11 Login"}),n.jsx(s.default,{href:"/register",className:"btn-auth-secondary",children:"\uD83D\uDCDD Register"})]})]})})})]})})}function c({title:e="Something went wrong",message:r,primaryAction:t,secondaryAction:o,className:i="hero-bg"}){return n.jsx("div",{className:"App",children:(0,n.jsxs)("div",{className:i,children:[n.jsx(a,{}),n.jsx("main",{className:"error-main",children:n.jsx("div",{className:"error-container-modern",children:(0,n.jsxs)("div",{className:"error-content",children:[n.jsx("div",{className:"error-icon",children:"âŒ"}),n.jsx("h2",{children:e}),n.jsx("p",{children:r}),(0,n.jsxs)("div",{className:"error-actions",children:[t&&(0,n.jsxs)(s.default,{href:t.href,className:"btn-error-primary",children:[t.icon," ",t.text]}),o&&(0,n.jsxs)(s.default,{href:o.href,className:"btn-error-secondary",children:[o.icon," ",o.text]})]})]})})})]})})}},4131:(e,r,t)=>{"use strict";t.d(r,{a:()=>a});var n=t(7577),s=t(5047);function a(e={}){let{requireAuth:r=!1,redirectToLogin:t=!1}=e,a=(0,s.useRouter)(),[o,i]=(0,n.useState)({user:null,loading:!0,error:null}),c=(0,n.useCallback)(async()=>{try{let e=localStorage.getItem("accessToken");if(!e){i({user:null,loading:!1,error:null}),r&&t&&a.push("/login");return}let n=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(n.ok){let e=await n.json();i({user:e.user,loading:!1,error:null})}else if(401===n.status){let e=localStorage.getItem("refreshToken");if(e)try{let r=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(r.ok){let e=await r.json();localStorage.setItem("accessToken",e.session.accessToken),localStorage.setItem("refreshToken",e.session.refreshToken);let t=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e.session.accessToken}`,"Content-Type":"application/json"}});if(t.ok){let e=await t.json();i({user:e.user,loading:!1,error:null})}else l()}else l()}catch(e){console.error("Token refresh error:",e),l()}else l()}else l()}catch(e){console.error("Auth check error:",e),i({user:null,loading:!1,error:"Failed to check authentication"}),r&&t&&a.push("/login")}},[r,t,a]),l=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),i({user:null,loading:!1,error:null}),r&&t&&a.push("/login")};return{user:o.user,loading:o.loading,error:o.error,isAuthenticated:!!o.user,logout:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),i({user:null,loading:!1,error:null}),a.push("/")},refreshAuth:()=>{i(e=>({...e,loading:!0})),c()}}}},1324:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});let n=(0,t(8570).createProxy)(String.raw`C:\Users\Bevan\uni-food-delivery\src\app\checkout\page.tsx#default`)},2029:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i,metadata:()=>o});var n=t(9510),s=t(5384),a=t.n(s);t(1141);let o={title:"Campus Angel - University Food Delivery",description:"Your campus food angel is here! Order delicious food from campus restaurants with fast delivery."};function i({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:a().className,children:e})})}},1141:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[276,349,496],()=>t(8458));module.exports=n})();